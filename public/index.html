<!--
  AarogyaTech - AI-powered Mental Health Assistant
  Student Interface - Main Application HTML
  
  Copyright (c) 2025 Rajiv Magadum
  All rights reserved.
  
  This software is proprietary and confidential.
  Unauthorized copying or distribution is strictly prohibited.
  
  Author: Rajiv Magadum
  Email: rajiv.magadum@gmail.com
  Date: 2025
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>"
        type="image/svg+xml">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AarogyaTech">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#8b5cf6">
    <title>AarogyaTech - AI Voice Assistant for Student Mental Health</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Enhanced Music Player Styles */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes musicWave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }
        
        /* Custom Range Slider Styling */
        #musicVolume {
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #8b5cf6 0%, #8b5cf6 50%, rgba(139, 92, 246, 0.3) 50%, rgba(139, 92, 246, 0.3) 100%);
            border-radius: 2px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        #musicVolume::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        #musicVolume::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 3px 8px rgba(139, 92, 246, 0.5);
        }
        
        #musicVolume::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
        }
        
        /* Music Player Hover Effects */
        .music-player:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.15);
            transition: all 0.3s ease;
        }
        
        /* Responsive Design for Music Player */
        @media (max-width: 768px) {
            .music-player {
                padding: 15px !important;
            }
            
            .music-player > div:first-child {
                flex-direction: column;
                text-align: center;
            }
            
            .music-player > div:first-child > div:first-child {
                margin-right: 0 !important;
                margin-bottom: 10px;
            }
        }

        /* Peer Support Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 10px;
            max-width: 800px;
            max-height: 90vh;
            width: 90%;
            overflow-y: auto;
            color: #f3f4f6;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .modal-header h3 {
            margin: 0;
            color: #c084fc;
        }

        .modal-close {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #f3f4f6;
        }

        .modal-body {
            padding: 20px;
        }

        .post-category {
            background: rgba(139, 92, 246, 0.2);
            color: #c084fc;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }

        .post-pinned {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }

        .post-stats {
            color: #9ca3af;
            font-size: 14px;
            margin-left: 15px;
        }

        .replies-section {
            margin-top: 30px;
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            padding-top: 20px;
        }

        .replies-section h4 {
            color: #c084fc;
            margin-bottom: 15px;
        }

        .reply-form {
            margin-bottom: 20px;
        }

        .reply-form textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #f3f4f6;
            resize: vertical;
            margin-bottom: 10px;
        }

        .reply {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .reply-meta {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .reply-actions {
            margin-top: 10px;
        }

        .support-btn.active {
            background: rgba(139, 92, 246, 0.3);
            color: #c084fc;
        }

        .forum-post {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .forum-post:hover {
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateY(-2px);
        }

        .forum-post h4 {
            color: #c084fc;
            margin-bottom: 10px;
        }

        .post-meta {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }

        .post-actions {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            align-items: center;
        }

        .support-btn, .reply-btn {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #c084fc;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .support-btn:hover, .reply-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.5);
        }

        /* Responsive modal */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                max-height: 95vh;
            }
            
            .modal-header, .modal-body {
                padding: 15px;
            }
            
            .post-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .support-btn, .reply-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="language-btn active" onclick="switchLanguage('en')" id="langEn">EN</button>
        <button class="language-btn" onclick="switchLanguage('mr')" id="langMr">‡§Æ‡§∞‡§æ‡§†‡•Ä</button>
    </div>

    <!-- Main Login Selection -->
    <div id="loginSelection" class="login-overlay">
        <div class="login-container">
            <div class="login-header">
                <h1>üß† <span data-en="AarogyaTech" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§æ‡§≥‡§ú‡•Ä">AarogyaTech</span></h1>
                <p><span data-en="Student Mental Health Support Platform" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§™‡•ç‡§≤‡•Ö‡§ü‡§´‡•â‡§∞‡•ç‡§Æ">Student Mental Health Support Platform</span></p>
            </div>
            
            <div class="login-options">
                <div class="login-option-card" onclick="showStudentLogin()">
                    <div class="option-icon">üë®‚Äçüéì</div>
                    <h3><span data-en="Student Login" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§≤‡•â‡§ó‡§ø‡§®">Student Login</span></h3>
                    <p><span data-en="Access AI mental health support and resources" data-mr="AI ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§Ü‡§£‡§ø ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á ‡§Æ‡§ø‡§≥‡§µ‡§æ">Access AI mental health support and resources</span></p>
                </div>
                
                <div class="login-option-card" onclick="showAdminLogin()">
                    <div class="option-icon">üë®‚Äçüíº</div>
                    <h3><span data-en="Admin / Counsellor" data-mr="‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï / ‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§ï">Admin / Counsellor</span></h3>
                    <p><span data-en="Access dashboard and management tools" data-mr="‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§Ü‡§£‡§ø ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§® ‡§∏‡§æ‡§ß‡§®‡•á ‡§Æ‡§ø‡§≥‡§µ‡§æ">Access dashboard and management tools</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Login Overlay -->
    <div id="studentLoginOverlay" class="login-overlay" style="display: none;">
        <div class="login-container">
            <div class="login-header">
                <button class="back-btn" onclick="showLoginSelection()">‚Üê <span data-en="Back" data-mr="‡§™‡§∞‡§§">Back</span></button>
                <h1>üß† <span data-en="AarogyaTech Student" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§æ‡§≥‡§ú‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä">AarogyaTech Student</span></h1>
                <p><span data-en="Student Mental Health Support" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ">Student Mental Health Support</span></p>
            </div>
            <form class="login-form" onsubmit="handleStudentLogin(event)">
                <div class="form-group">
                    <label for="studentEmail"><span data-en="Email" data-mr="‡§à‡§Æ‡•á‡§≤">Email</span></label>
                    <input type="email" id="studentEmail" data-placeholder-en="Enter your email"
                        data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§ü‡§æ‡§ï‡§æ" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="studentPassword"><span data-en="Password" data-mr="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">Password</span></label>
                    <input type="password" id="studentPassword" data-placeholder-en="Enter your password"
                        data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ü‡§æ‡§ï‡§æ" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="login-btn"><span data-en="Enter MindCare"
                        data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§æ‡§≥‡§ú‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§æ">Enter AarogyaTech</span></button>
            </form>
            <div class="register-link">
                <p><span data-en="Demo login: Use any email and password to access"
                        data-mr="‡§°‡•á‡§Æ‡•ã ‡§≤‡•â‡§ó‡§ø‡§®: ‡§™‡•ç‡§∞‡§µ‡•á‡§∂‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•ã‡§£‡§§‡§æ‡§π‡•Ä ‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§£‡§ø ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§µ‡§æ‡§™‡§∞‡§æ">Demo login: Use any email and password to access</span></p>
            </div>
        </div>
    </div>

    <!-- Admin Login Overlay -->
    <div id="adminLoginOverlay" class="login-overlay" style="display: none;">
        <div class="login-container">
            <div class="login-header">
                <button class="back-btn" onclick="showLoginSelection()">‚Üê <span data-en="Back" data-mr="‡§™‡§∞‡§§">Back</span></button>
                <h1>üß† <span data-en="AarogyaTech Admin" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§æ‡§≥‡§ú‡•Ä ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï">AarogyaTech Admin</span></h1>
                <p><span data-en="Administrative Dashboard" data-mr="‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°">Administrative Dashboard</span></p>
            </div>
            <form class="login-form" onsubmit="handleAdminLogin(event)">
                <div class="form-group">
                    <label for="adminUsername"><span data-en="Username" data-mr="‡§µ‡§æ‡§™‡§∞‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§æ‡§µ">Username</span></label>
                    <input type="text" id="adminUsername" data-placeholder-en="Enter username" 
                        data-placeholder-mr="‡§µ‡§æ‡§™‡§∞‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§æ‡§µ ‡§ü‡§æ‡§ï‡§æ" placeholder="Enter username" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword"><span data-en="Password" data-mr="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">Password</span></label>
                    <input type="password" id="adminPassword" data-placeholder-en="Enter password" 
                        data-placeholder-mr="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ü‡§æ‡§ï‡§æ" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label for="userRole"><span data-en="Role" data-mr="‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ">Role</span></label>
                    <select id="userRole" required>
                        <option value="admin" data-en="Administrator" data-mr="‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï">Administrator</option>
                        <option value="counselor" data-en="Counselor" data-mr="‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§ï">Counselor</option>
                    </select>
                </div>
                <button type="submit" class="login-btn">
                    <span data-en="Access Dashboard" data-mr="‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§æ">Access Dashboard</span>
                </button>
            </form>
            <div class="register-link">
                <p><span data-en="Demo: admin/admin123 or counselor/counselor123" 
                    data-mr="‡§°‡•á‡§Æ‡•ã: admin/admin123 ‡§ï‡§ø‡§Ç‡§µ‡§æ counselor/counselor123">Demo: admin/admin123 or counselor/counselor123</span></p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="container" style="display: none;">
        <!-- User Info Bar -->
        <div class="user-info-bar">
            <div class="user-details">
                <span><span data-en="Welcome," data-mr="‡§∏‡•ç‡§µ‡§æ‡§ó‡§§,">Welcome,</span> <strong
                        id="currentUserName">Student</strong></span>
                <span style="color: #9ca3af;" id="currentUserEmail">student@university.edu</span>
            </div>
            <button class="logout-btn" onclick="logout()"><span data-en="Logout"
                    data-mr="‡§¨‡§æ‡§π‡•á‡§∞ ‡§™‡§°‡§æ">Logout</span></button>
        </div>

        <div class="header">
            <h1>üß† <span data-en="AarogyaTech" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§æ‡§≥‡§ú‡•Ä">AarogyaTech</span></h1>
            <p><span data-en="Your Digital Mental Health Companion" data-mr="‡§§‡•Å‡§Æ‡§ö‡§æ ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§æ‡§•‡•Ä‡§¶‡§æ‡§∞">Your
                    Digital Mental Health Companion</span></p>
        </div>

        <div class="emergency-banner">
            üö® <span data-en="Emergency? Call National Suicide Prevention Lifeline:"
                data-mr="‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§®? ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ü‡§§‡•ç‡§Æ‡§π‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§Ç‡§ß ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®‡§µ‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§æ:">Emergency? Call National Suicide
                Prevention Lifeline:</span> <a href="tel:988">988</a> | <span data-en="Campus Crisis Line:"
                data-mr="‡§ï‡•Ö‡§Æ‡•ç‡§™‡§∏ ‡§∏‡§Ç‡§ï‡§ü ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:">Campus Crisis Line:</span> <a href="tel:+1234567890">+1-234-567-890</a>
        </div>

        <div class="main-nav">
            <button class="nav-btn active" onclick="showSection('chat')"><span data-en="AI Voice Support"
                    data-mr="AI ‡§Ü‡§µ‡§æ‡§ú ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">AI Voice Support</span></button>
            <button class="nav-btn" onclick="showSection('screening')"><span data-en="Mental Health Screening"
                    data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">Mental Health Screening</span></button>
            <button class="nav-btn" onclick="showSection('booking')"><span data-en="Book Counseling"
                    data-mr="‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§® ‡§¨‡•Å‡§ï ‡§ï‡§∞‡§æ">Book Counseling</span></button>
            <button class="nav-btn" onclick="showSection('resources')"><span data-en="Resources"
                    data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á">Resources</span></button>
            <button class="nav-btn" onclick="showSection('peer-support')"><span data-en="Peer Support"
                    data-mr="‡§∏‡§Æ‡§µ‡§Ø‡§∏‡•ç‡§ï ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Peer Support</span></button>
        </div>

        <!-- AI Chat Section -->
        <div id="chat" class="content-area active">
            <div class="chat-header">
                <h2><span data-en="AI Voice Assistant - Mental Health Support"
                        data-mr="AI ‡§Ü‡§µ‡§æ‡§ú ‡§∏‡§π‡§æ‡§Ø‡§ï - ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">AI Voice Assistant - Mental Health Support</span>
                </h2>
                <div class="chat-controls">
                    <div class="ai-language-selector">
                        <label for="aiLanguageSelect"><span data-en="AI Language:" data-mr="AI ‡§≠‡§æ‡§∑‡§æ:">AI
                                Language:</span></label>
                        <select id="aiLanguageSelect" onchange="setAILanguage(this.value)">
                            <option value="en" data-en="English" data-mr="‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä">English</option>
                            <option value="mr" data-en="Marathi" data-mr="‡§Æ‡§∞‡§æ‡§†‡•Ä">Marathi</option>
                        </select>
                    </div>
                    <button class="control-btn" onclick="ChatInterface.clearHistory()" title="Clear Chat">
                        üóëÔ∏è <span data-en="Clear" data-mr="‡§∏‡§æ‡§´ ‡§ï‡§∞‡§æ">Clear</span>
                    </button>
                    <button class="control-btn" onclick="ChatInterface.exportHistory()" title="Export Chat">
                        üíæ <span data-en="Export" data-mr="‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§">Export</span>
                    </button>
                </div>
            </div>
            <p style="margin-bottom: 20px; color: #9ca3af;"><span
                    data-en="Share what's on your mind using text or voice. I'm here to listen and provide helpful coping strategies with natural, human-like responses. Remember, I'm not a replacement for professional help."
                    data-mr="‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§Æ‡§®‡§æ‡§§‡•Ä‡§≤ ‡§ó‡•ã‡§∑‡•ç‡§ü‡•Ä ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Ü‡§µ‡§æ‡§ú‡§æ‡§¶‡•ç‡§µ‡§æ‡§∞‡•á ‡§∏‡§æ‡§Ç‡§ó‡§æ. ‡§Æ‡•Ä ‡§Ø‡•á‡§•‡•á ‡§ê‡§ï‡§£‡•ç‡§Ø‡§æ‡§∏a‡§†‡•Ä ‡§Ü‡§£‡§ø ‡§®‡•à‡§∏‡§∞‡•ç‡§ó‡§ø‡§ï, ‡§Æ‡§æ‡§®‡§µ‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶‡§æ‡§Ç‡§∏‡§π ‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§∏‡§æ‡§Æ‡§®‡§æ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§ß‡•ã‡§∞‡§£‡•á ‡§¶‡•á‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§π‡•á. ‡§≤‡§ï‡•ç‡§∑‡§æ‡§§ ‡§†‡•á‡§µ‡§æ, ‡§Æ‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡§¶‡§§‡•Ä‡§ö‡§æ ‡§™‡§∞‡•ç‡§Ø‡§æ‡§Ø ‡§®‡§æ‡§π‡•Ä.">Share
                    what's on your mind using text or voice. I'm here to listen and provide helpful coping strategies
                    with natural, human-like responses. Remember, I'm not a replacement for professional help.</span>
            </p>

            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message bot">
                        <div class="message-content">
                            <span
                                data-en="Hello! I'm here to support you. How are you feeling today? You can share anything that's bothering you, and I'll do my best to help."
                                data-mr="‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ø‡•á‡§•‡•á ‡§Ü‡§π‡•á. ‡§Ü‡§ú ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ï‡§∏‡•á ‡§µ‡§æ‡§ü‡§§ ‡§Ü‡§π‡•á? ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§¶‡•á‡§£‡§æ‡§∞‡•Ä ‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä ‡§ó‡•ã‡§∑‡•ç‡§ü ‡§∏‡§æ‡§Ç‡§ó‡•Ç ‡§∂‡§ï‡§§‡§æ ‡§Ü‡§£‡§ø ‡§Æ‡•Ä ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡•á‡§®.">Hello!
                                I'm here to support you. How are you feeling today? You can share anything that's
                                bothering you, and I'll do my best to help.</span>
                        </div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <!-- Voice Mode Selector -->
                    <div class="voice-mode-selector">
                        <button class="mode-btn active" data-mode="text" onclick="setVoiceMode('text')">
                            <span data-en="Text Only" data-mr="‡§ï‡•á‡§µ‡§≥ ‡§Æ‡§ú‡§ï‡•Ç‡§∞">Text Only</span>
                        </button>
                        <button class="mode-btn" data-mode="voice-to-text" onclick="setVoiceMode('voice-to-text')">
                            <span data-en="Voice to Text" data-mr="‡§Ü‡§µ‡§æ‡§ú ‡§§‡•á ‡§Æ‡§ú‡§ï‡•Ç‡§∞">Voice to Text</span>
                        </button>
                        <button class="mode-btn" data-mode="voice-to-voice" onclick="setVoiceMode('voice-to-voice')">
                            <span data-en="Voice to Voice" data-mr="‡§Ü‡§µ‡§æ‡§ú ‡§§‡•á ‡§Ü‡§µ‡§æ‡§ú">Voice to Voice</span>
                        </button>
                    </div>

                    <!-- Enhanced Chat Input -->
                    <div class="enhanced-chat-input">
                        <input type="text" id="chatInput" data-placeholder-en="Type your message here..."
                            data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡•á‡§•‡•á ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ..." placeholder="Type your message here..."
                            onkeypress="handleEnter(event)">

                        <!-- Voice Controls -->
                        <div class="voice-controls">
                            <button class="voice-btn" id="voiceBtn" title="Start Voice Recording"
                                style="display: none;">
                                üé§
                            </button>
                            <button class="stop-voice-btn" id="stopVoiceBtn" onclick="stopVoiceRecording()">
                                <span data-en="Stop" data-mr="‡§•‡§æ‡§Ç‡§¨‡§æ">Stop</span>
                            </button>
                            <button class="voice-to-text-btn" id="voiceToTextBtn" onclick="startVoiceToText()"
                                style="display: none;">
                                <span data-en="üé§‚Üíüìù" data-mr="üé§‚Üíüìù">üé§‚Üíüìù</span>
                            </button>
                        </div>

                        <button class="send-btn" onclick="sendMessage()">
                            <span data-en="Send" data-mr="‡§™‡§æ‡§†‡§µ‡§æ">Send</span>
                        </button>
                    </div>

                    <!-- Voice Indicators -->
                    <div style="display: flex; align-items: center; margin-top: 10px; gap: 15px; flex-wrap: wrap;">
                        <div class="voice-indicator" id="voiceIndicator">
                            <div class="recording-dot"></div>
                            <span data-en="Listening..." data-mr="‡§ê‡§ï‡§§ ‡§Ü‡§π‡•á...">Listening...</span>
                        </div>
                        <div class="playback-indicator" id="playbackIndicator">
                            <div class="sound-wave"></div>
                            <span data-en="Playing response..." data-mr="‡§â‡§§‡•ç‡§§‡§∞ ‡§µ‡§æ‡§ú‡§µ‡§§ ‡§Ü‡§π‡•á...">Playing response...</span>
                        </div>
                        <div class="voice-ready-indicator" id="voiceReadyIndicator">
                            <div class="ready-pulse"></div>
                            <span data-en="Ready for your voice..." data-mr="‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Ü‡§µ‡§æ‡§ú‡§æ‡§∏‡§æ‡§†‡•Ä ‡§§‡§Ø‡§æ‡§∞...">Ready for your
                                voice...</span>
                        </div>
                        <div class="processing-indicator" id="processingIndicator">
                            Processing...
                        </div>
                        <div class="audio-queue-indicator" id="audioQueueIndicator">
                            0 in queue
                        </div>
                    </div>

                    <!-- Audio Progress Bar -->
                    <div class="audio-progress-container" id="audioProgressContainer" style="display: none;">
                        <div class="audio-progress-bar">
                            <div class="audio-progress-fill" id="audioProgressBar"></div>
                        </div>
                        <div class="audio-time-display" id="audioTimeDisplay">0:00 / 0:00</div>
                    </div>

                    <!-- Audio Playback Controls -->
                    <div class="audio-controls" id="audioControls" style="display: none;">
                        <button class="audio-control-btn" id="audioPauseBtn" onclick="AudioPlaybackManager.pause()"
                            title="Pause">
                            ‚è∏Ô∏è <span data-en="Pause" data-mr="‡§•‡§æ‡§Ç‡§¨‡§µ‡§æ">Pause</span>
                        </button>
                        <button class="audio-control-btn" id="audioResumeBtn" onclick="AudioPlaybackManager.resume()"
                            title="Resume">
                            ‚ñ∂Ô∏è <span data-en="Resume" data-mr="‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§æ">Resume</span>
                        </button>
                        <button class="audio-control-btn" id="audioStopBtn" onclick="AudioPlaybackManager.stop()"
                            title="Stop">
                            ‚èπÔ∏è <span data-en="Stop" data-mr="‡§•‡§æ‡§Ç‡§¨‡§æ">Stop</span>
                        </button>
                        <button class="audio-control-btn" id="audioSkipBtn" onclick="AudioPlaybackManager.skipToNext()"
                            title="Skip">
                            ‚è≠Ô∏è <span data-en="Skip" data-mr="‡§µ‡§ó‡§≥‡§æ">Skip</span>
                        </button>

                        <!-- Volume Control -->
                        <div class="volume-control">
                            <label for="volumeSlider">üîä</label>
                            <input type="range" id="volumeSlider" min="0" max="100" value="100"
                                onchange="AudioPlaybackManager.setVolume(this.value / 100)">
                        </div>

                        <!-- Speed Control -->
                        <div class="speed-control">
                            <label for="speedSlider">‚ö°</label>
                            <input type="range" id="speedSlider" min="50" max="200" value="100"
                                onchange="AudioPlaybackManager.setPlaybackRate(this.value / 100)">
                            <span id="speedDisplay">1.0x</span>
                        </div>
                    </div>

                    <!-- Voice Error Display -->
                    <div class="voice-error" id="voiceError"></div>
                </div>
                
                <!-- Advanced Voice Interaction Area -->
                <div id="voiceInteractionArea" class="voice-interaction-area" style="display: none; margin-top: 20px;">
                    <h3 style="margin-bottom: 15px; color: #c084fc;">üé§ Advanced Voice Interaction</h3>
                    <div id="voiceInteractionContainer" class="voice-interaction-container-placeholder">
                        <!-- VoiceInteractionManager UI will be inserted here -->
                    </div>
                    <button id="toggleVoiceArea" class="control-btn" onclick="toggleAdvancedVoiceArea()" style="margin-top: 10px;">
                        üéôÔ∏è <span data-en="Switch to Advanced Voice Mode" data-mr="‡§™‡•ç‡§∞‡§ó‡§§ ‡§Ü‡§µ‡§æ‡§ú ‡§Æ‡•ã‡§°‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡•ç‡§µ‡§ø‡§ö ‡§ï‡§∞‡§æ">Switch to Advanced Voice Mode</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mental Health Screening Section -->
        <div id="screening" class="content-area">
            <!-- Screening Home -->
            <div id="screeningHome">
                <h2><span data-en="Mental Health Screening Tools" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®‡•á">Mental Health Screening Tools</span></h2>
                <p style="margin-bottom: 30px; color: #9ca3af;"><span data-en="Professional-grade psychological screening tools to assess your mental health. These are widely used clinical instruments that help identify depression, anxiety, and general psychological distress." data-mr="‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§æ‡§ö‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï-‡§¶‡§∞‡•ç‡§ú‡§æ‡§ö‡•Ä ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®‡•á. ‡§π‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§™‡§ï‡§™‡§£‡•á ‡§µ‡§æ‡§™‡§∞‡§≤‡•Ä ‡§ú‡§æ‡§£‡§æ‡§∞‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§â‡§™‡§ï‡§∞‡§£‡•á ‡§Ü‡§π‡•á‡§§ ‡§ú‡•Ä ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø, ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§Ü‡§£‡§ø ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§ì‡§≥‡§ñ‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡§§‡§æ‡§§.">Professional-grade psychological screening tools to assess your mental health. These are widely used clinical instruments that help identify depression, anxiety, and general psychological distress.</span></p>
                
                <div class="screening-disclaimer" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                    <h4 style="color: #ef4444; margin-bottom: 10px;">‚ö†Ô∏è <span data-en="Important Disclaimer" data-mr="‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ö‡•Ä ‡§∏‡•Ç‡§ö‡§®‡§æ">Important Disclaimer</span></h4>
                    <p><span data-en="These screening tools are for educational purposes only and do not constitute professional medical advice, diagnosis, or treatment. Results should be discussed with a qualified healthcare provider. If you are experiencing a mental health crisis, please seek immediate professional help." data-mr="‡§π‡•Ä ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®‡•á ‡§ï‡•á‡§µ‡§≥ ‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§π‡•á‡§§‡•Ç‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§π‡•á‡§§ ‡§Ü‡§£‡§ø ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§µ‡•à‡§¶‡•ç‡§Ø‡§ï‡•Ä‡§Ø ‡§∏‡§≤‡•ç‡§≤‡§æ, ‡§®‡§ø‡§¶‡§æ‡§® ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§®‡§æ‡§π‡•Ä‡§§. ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ‡§æ‡§Ç‡§ö‡•Ä ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§™‡§æ‡§§‡•ç‡§∞ ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡•ç‡§Ø‡§æ‡§∏‡•ã‡§¨‡§§ ‡§ï‡•á‡§≤‡•Ä ‡§™‡§æ‡§π‡§ø‡§ú‡•á. ‡§ú‡§∞ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§Ç‡§ï‡§ü ‡§Ø‡•á‡§§ ‡§Ö‡§∏‡•á‡§≤, ‡§§‡§∞ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≥ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡§¶‡§§ ‡§ò‡•ç‡§Ø‡§æ.">These screening tools are for educational purposes only and do not constitute professional medical advice, diagnosis, or treatment. Results should be discussed with a qualified healthcare provider. If you are experiencing a mental health crisis, please seek immediate professional help.</span></p>
                </div>
                

                
                <div class="screening-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="screening-card" onclick="showScreeningTool('phq9')" style="background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(139, 92, 246, 0.3); padding: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
                        <h3>üìä <span data-en="PHQ-9 Depression Screening" data-mr="PHQ-9 ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">PHQ-9 Depression Screening</span></h3>
                        <p><span data-en="9-question screening tool to assess depression severity over the past 2 weeks" data-mr="‡§ó‡•á‡§≤‡•ç‡§Ø‡§æ ‡•® ‡§Ü‡§†‡§µ‡§°‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ ‡§Æ‡•ã‡§ú‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡•Ø-‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®">9-question screening tool to assess depression severity over the past 2 weeks</span></p>
                        <div style="margin-top: 15px; color: #a78bfa;">
                            <span data-en="‚è±Ô∏è ~3-5 minutes ‚Ä¢ Clinical Grade" data-mr="‚è±Ô∏è ~‡•©-‡•´ ‡§Æ‡§ø‡§®‡§ø‡§ü‡•á ‚Ä¢ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§¶‡§∞‡•ç‡§ú‡§æ‡§ö‡•Ä">‚è±Ô∏è ~3-5 minutes ‚Ä¢ Clinical Grade</span>
                        </div>
                    </div>
                    
                    <div class="screening-card" onclick="showScreeningTool('gad7')" style="background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(139, 92, 246, 0.3); padding: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
                        <h3>üß† <span data-en="GAD-7 Anxiety Screening" data-mr="GAD-7 ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">GAD-7 Anxiety Screening</span></h3>
                        <p><span data-en="7-question screening tool to assess generalized anxiety disorder symptoms" data-mr="‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø‡•Ä‡§ï‡•É‡§§ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§µ‡§ø‡§ï‡§æ‡§∞‡§æ‡§ö‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§Æ‡•ã‡§ú‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡•≠-‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®">7-question screening tool to assess generalized anxiety disorder symptoms</span></p>
                        <div style="margin-top: 15px; color: #a78bfa;">
                            <span data-en="‚è±Ô∏è ~2-4 minutes ‚Ä¢ Clinical Grade" data-mr="‚è±Ô∏è ~‡•®-‡•™ ‡§Æ‡§ø‡§®‡§ø‡§ü‡•á ‚Ä¢ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§¶‡§∞‡•ç‡§ú‡§æ‡§ö‡•Ä">‚è±Ô∏è ~2-4 minutes ‚Ä¢ Clinical Grade</span>
                        </div>
                    </div>
                    
                    <div class="screening-card" onclick="showScreeningTool('ghq12')" style="background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(139, 92, 246, 0.3); padding: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
                        <h3>üå°Ô∏è <span data-en="GHQ-12 General Health Screening" data-mr="GHQ-12 ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">GHQ-12 General Health Screening</span></h3>
                        <p><span data-en="12-question screening tool to assess general psychological well-being and distress" data-mr="‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§Ü‡§£‡§ø ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§Æ‡•ã‡§ú‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡•ß‡•®-‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®">12-question screening tool to assess general psychological well-being and distress</span></p>
                        <div style="margin-top: 15px; color: #a78bfa;">
                            <span data-en="‚è±Ô∏è ~4-6 minutes ‚Ä¢ Clinical Grade" data-mr="‚è±Ô∏è ~‡•™-‡•¨ ‡§Æ‡§ø‡§®‡§ø‡§ü‡•á ‚Ä¢ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§¶‡§∞‡•ç‡§ú‡§æ‡§ö‡•Ä">‚è±Ô∏è ~4-6 minutes ‚Ä¢ Clinical Grade</span>
                        </div>
                    </div>
                </div>
                
                <div class="screening-info" style="margin-top: 30px; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #06b6d4; margin-bottom: 15px;">üí° <span data-en="How These Tools Work" data-mr="‡§π‡•Ä ‡§∏‡§æ‡§ß‡§®‡•á ‡§ï‡§∂‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡§∞‡§§‡§æ‡§§">How These Tools Work</span></h4>
                    <ul style="color: #d1d5db; line-height: 1.6;">
                        <li><span data-en="Each tool contains clinically validated questions based on diagnostic criteria" data-mr="‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§∏‡§æ‡§ß‡§®‡§æ‡§§ ‡§®‡§ø‡§¶‡§æ‡§® ‡§®‡§ø‡§ï‡§∑‡§æ‡§Ç‡§µ‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§µ‡•à‡§¶‡•ç‡§Ø‡§ï‡•Ä‡§Ø‡§¶‡•É‡§∑‡•ç‡§ü‡•ç‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Ü‡§π‡•á‡§§">Each tool contains clinically validated questions based on diagnostic criteria</span></li>
                        <li><span data-en="Your responses are scored using standardized clinical methods" data-mr="‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶‡§æ‡§Ç‡§®‡§æ ‡§Æ‡§æ‡§®‡§ï‡•Ä‡§ï‡•É‡§§ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§™‡§¶‡•ç‡§ß‡§§‡•Ä‡§Ç‡§ö‡§æ ‡§µ‡§æ‡§™‡§∞ ‡§ï‡§∞‡•Ç‡§® ‡§ó‡•Å‡§£ ‡§¶‡§ø‡§≤‡•á ‡§ú‡§æ‡§§‡§æ‡§§">Your responses are scored using standardized clinical methods</span></li>
                        <li><span data-en="Results indicate severity levels and provide professional recommendations" data-mr="‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ ‡§™‡§æ‡§§‡§≥‡•Ä ‡§¶‡§∞‡•ç‡§∂‡§µ‡§§‡§æ‡§§ ‡§Ü‡§£‡§ø ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä ‡§¶‡•á‡§§‡§æ‡§§">Results indicate severity levels and provide professional recommendations</span></li>
                        <li><span data-en="All data is kept confidential and used only for your assessment" data-mr="‡§∏‡§∞‡•ç‡§µ ‡§°‡•á‡§ü‡§æ ‡§ó‡•Å‡§™‡•ç‡§§ ‡§†‡•á‡§µ‡§≤‡§æ ‡§ú‡§æ‡§§‡•ã ‡§Ü‡§£‡§ø ‡§ï‡•á‡§µ‡§≥ ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®‡§æ‡§∏‡§æ‡§†‡•Ä ‡§µ‡§æ‡§™‡§∞‡§≤‡§æ ‡§ú‡§æ‡§§‡•ã">All data is kept confidential and used only for your assessment</span></li>
                    </ul>
                </div>
            </div>
            
            <!-- PHQ-9 Depression Screening -->
            <div id="phq9Screening" class="screening-detail" style="display: none;">
                <button class="back-btn" onclick="showScreeningHome()">‚Üê <span data-en="Back to Screening Tools" data-mr="‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Screening Tools</span></button>
                <h2>üìä <span data-en="PHQ-9 Depression Screening" data-mr="PHQ-9 ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">PHQ-9 Depression Screening</span></h2>
                
                <div class="screening-instructions" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                    <h4 style="color: #6366f1; margin-bottom: 10px;">üìã <span data-en="Instructions" data-mr="‡§∏‡•Ç‡§ö‡§®‡§æ">Instructions</span></h4>
                    <p><span data-en="Over the last 2 weeks, how often have you been bothered by any of the following problems? Please select the most appropriate response for each item." data-mr="‡§ó‡•á‡§≤‡•ç‡§Ø‡§æ ‡•® ‡§Ü‡§†‡§µ‡§°‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á, ‡§ñ‡§æ‡§≤‡•Ä‡§≤‡§™‡•à‡§ï‡•Ä ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡•Å‡§≥‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ï‡§ø‡§§‡•Ä ‡§µ‡•á‡§≥‡§æ ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§ù‡§æ‡§≤‡§æ ‡§Ü‡§π‡•á? ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§¨‡§æ‡§¨‡•Ä‡§∏‡§æ‡§†‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§æ‡§§ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶ ‡§®‡§ø‡§µ‡§°‡§æ.">Over the last 2 weeks, how often have you been bothered by any of the following problems? Please select the most appropriate response for each item.</span></p>
                </div>
                
                <form id="phq9Form" class="screening-form">
                    <div id="phq9Questions"><!-- Questions will be populated by JavaScript --></div>
                    
                    <!-- User Description Field -->
                    <div class="user-description-section" style="margin-top: 30px; padding: 20px; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 10px;">
                        <h4 style="color: #6366f1; margin-bottom: 15px;">üí≠ <span data-en="Additional Information (Optional)" data-mr="‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä (‡§ê‡§ö‡•ç‡§õ‡§ø‡§ï)">Additional Information (Optional)</span></h4>
                        <p style="color: #9ca3af; margin-bottom: 15px; font-size: 14px;">
                            <span data-en="Please describe any additional concerns, symptoms, or context you'd like to share about your mental health. This information will help provide more personalized recommendations." 
                                  data-mr="‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ö‡§ø‡§Ç‡§§‡§æ, ‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠‡§æ‡§ö‡•á ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡§æ. ‡§π‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï‡•É‡§§ ‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä ‡§¶‡•á‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•á‡§≤.">
                                Please describe any additional concerns, symptoms, or context you'd like to share about your mental health. This information will help provide more personalized recommendations.
                            </span>
                        </p>
                        <textarea id="phq9UserDescription" 
                                  placeholder="Share your thoughts, concerns, or any additional context..." 
                                  data-placeholder-en="Share your thoughts, concerns, or any additional context..."
                                  data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞, ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡•ã‡§£‡§§‡§æ‡§π‡•Ä ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ..."
                                  style="width: 100%; min-height: 100px; padding: 12px; border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; background: rgba(30, 41, 59, 0.5); color: #f3f4f6; font-family: inherit; resize: vertical;"
                                  maxlength="1000"></textarea>
                        <div style="text-align: right; margin-top: 5px; font-size: 12px; color: #9ca3af;">
                            <span id="phq9CharCount">0/1000</span>
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 30px; text-align: center;">
                        <button type="button" onclick="calculatePHQ9Score()" class="submit-btn" style="margin-right: 15px;">
                            <span data-en="Calculate Results" data-mr="‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡§æ‡§¢‡§æ">Calculate Results</span>
                        </button>
                        <button type="button" onclick="resetScreening('phq9')" style="background: #6b7280; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer;">
                            <span data-en="Reset" data-mr="‡§∞‡•Ä‡§∏‡•á‡§ü">Reset</span>
                        </button>
                    </div>
                </form>
                
                <div id="phq9Results" class="screening-results" style="display: none; margin-top: 30px;"></div>
            </div>
            
            <!-- GAD-7 Anxiety Screening -->
            <div id="gad7Screening" class="screening-detail" style="display: none;">
                <button class="back-btn" onclick="showScreeningHome()">‚Üê <span data-en="Back to Screening Tools" data-mr="‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Screening Tools</span></button>
                <h2>üß† <span data-en="GAD-7 Anxiety Screening" data-mr="GAD-7 ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">GAD-7 Anxiety Screening</span></h2>
                
                <div class="screening-instructions" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                    <h4 style="color: #6366f1; margin-bottom: 10px;">üìã <span data-en="Instructions" data-mr="‡§∏‡•Ç‡§ö‡§®‡§æ">Instructions</span></h4>
                    <p><span data-en="Over the last 2 weeks, how often have you been bothered by the following problems? Please select the most appropriate response." data-mr="‡§ó‡•á‡§≤‡•ç‡§Ø‡§æ ‡•® ‡§Ü‡§†‡§µ‡§°‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á, ‡§ñ‡§æ‡§≤‡•Ä‡§≤ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡•Å‡§≥‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ï‡§ø‡§§‡•Ä ‡§µ‡•á‡§≥‡§æ ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§ù‡§æ‡§≤‡§æ ‡§Ü‡§π‡•á? ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§§ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶ ‡§®‡§ø‡§µ‡§°‡§æ.">Over the last 2 weeks, how often have you been bothered by the following problems? Please select the most appropriate response.</span></p>
                </div>
                
                <form id="gad7Form" class="screening-form">
                    <div id="gad7Questions"><!-- Questions will be populated by JavaScript --></div>
                    
                    <!-- User Description Field -->
                    <div class="user-description-section" style="margin-top: 30px; padding: 20px; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 10px;">
                        <h4 style="color: #6366f1; margin-bottom: 15px;">üí≠ <span data-en="Additional Information (Optional)" data-mr="‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä (‡§ê‡§ö‡•ç‡§õ‡§ø‡§ï)">Additional Information (Optional)</span></h4>
                        <p style="color: #9ca3af; margin-bottom: 15px; font-size: 14px;">
                            <span data-en="Please describe any additional concerns, symptoms, or context you'd like to share about your anxiety or mental health. This information will help provide more personalized recommendations." 
                                  data-mr="‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ö‡§ø‡§Ç‡§§‡§æ, ‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠‡§æ‡§ö‡•á ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡§æ. ‡§π‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï‡•É‡§§ ‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä ‡§¶‡•á‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•á‡§≤.">
                                Please describe any additional concerns, symptoms, or context you'd like to share about your anxiety or mental health. This information will help provide more personalized recommendations.
                            </span>
                        </p>
                        <textarea id="gad7UserDescription" 
                                  placeholder="Share your thoughts, concerns, or any additional context..." 
                                  data-placeholder-en="Share your thoughts, concerns, or any additional context..."
                                  data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞, ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡•ã‡§£‡§§‡§æ‡§π‡•Ä ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ..."
                                  style="width: 100%; min-height: 100px; padding: 12px; border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; background: rgba(30, 41, 59, 0.5); color: #f3f4f6; font-family: inherit; resize: vertical;"
                                  maxlength="1000"></textarea>
                        <div style="text-align: right; margin-top: 5px; font-size: 12px; color: #9ca3af;">
                            <span id="gad7CharCount">0/1000</span>
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 30px; text-align: center;">
                        <button type="button" onclick="calculateGAD7Score()" class="submit-btn" style="margin-right: 15px;">
                            <span data-en="Calculate Results" data-mr="‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡§æ‡§¢‡§æ">Calculate Results</span>
                        </button>
                        <button type="button" onclick="resetScreening('gad7')" style="background: #6b7280; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer;">
                            <span data-en="Reset" data-mr="‡§∞‡•Ä‡§∏‡•á‡§ü">Reset</span>
                        </button>
                    </div>
                </form>
                
                <div id="gad7Results" class="screening-results" style="display: none; margin-top: 30px;"></div>
            </div>
            
            <!-- GHQ-12 General Health Screening -->
            <div id="ghq12Screening" class="screening-detail" style="display: none;">
                <button class="back-btn" onclick="showScreeningHome()">‚Üê <span data-en="Back to Screening Tools" data-mr="‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Screening Tools</span></button>
                <h2>üå°Ô∏è <span data-en="GHQ-12 General Health Screening" data-mr="GHQ-12 ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§§‡§™‡§æ‡§∏‡§£‡•Ä">GHQ-12 General Health Screening</span></h2>
                
                <div class="screening-instructions" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                    <h4 style="color: #6366f1; margin-bottom: 10px;">üìã <span data-en="Instructions" data-mr="‡§∏‡•Ç‡§ö‡§®‡§æ">Instructions</span></h4>
                    <p><span data-en="We would like to know if you have had any medical complaints and how your health has been in general, over the past few weeks. Please answer ALL the questions by selecting the response that you think most nearly applies to you." data-mr="‡§ó‡•á‡§≤‡•ç‡§Ø‡§æ ‡§ï‡§æ‡§π‡•Ä ‡§Ü‡§†‡§µ‡§°‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ï‡§æ‡§π‡•Ä ‡§µ‡•à‡§¶‡•ç‡§Ø‡§ï‡•Ä‡§Ø ‡§§‡§ï‡•ç‡§∞‡§æ‡§∞‡•Ä ‡§Ü‡§≤‡•ç‡§Ø‡§æ ‡§Ü‡§π‡•á‡§§ ‡§ï‡§æ ‡§Ü‡§£‡§ø ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§∞‡•ç‡§µ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£‡§™‡§£‡•á ‡§ï‡§∂‡•Ä ‡§Ü‡§π‡•á ‡§π‡•á ‡§Ü‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ú‡§æ‡§£‡•Ç‡§® ‡§ò‡•ç‡§Ø‡§æ‡§Ø‡§ö‡•á ‡§Ü‡§π‡•á. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§Ç‡§ö‡•Ä ‡§â‡§§‡•ç‡§§‡§∞‡•á ‡§¶‡•ç‡§Ø‡§æ ‡§Ü‡§£‡§ø ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§§ ‡§ú‡§µ‡§≥‡§ö‡§æ ‡§µ‡§æ‡§ü‡§§‡•ã ‡§Ö‡§∏‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶ ‡§®‡§ø‡§µ‡§°‡§æ.">We would like to know if you have had any medical complaints and how your health has been in general, over the past few weeks. Please answer ALL the questions by selecting the response that you think most nearly applies to you.</span></p>
                </div>
                
                <form id="ghq12Form" class="screening-form">
                    <div id="ghq12Questions"><!-- Questions will be populated by JavaScript --></div>
                    
                    <!-- User Description Field -->
                    <div class="user-description-section" style="margin-top: 30px; padding: 20px; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 10px;">
                        <h4 style="color: #6366f1; margin-bottom: 15px;">üí≠ <span data-en="Additional Information (Optional)" data-mr="‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä (‡§ê‡§ö‡•ç‡§õ‡§ø‡§ï)">Additional Information (Optional)</span></h4>
                        <p style="color: #9ca3af; margin-bottom: 15px; font-size: 14px;">
                            <span data-en="Please describe any additional concerns, symptoms, or context you'd like to share about your general well-being or mental health. This information will help provide more personalized recommendations." 
                                  data-mr="‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ö‡§ø‡§Ç‡§§‡§æ, ‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠‡§æ‡§ö‡•á ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡§æ. ‡§π‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï‡•É‡§§ ‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä ‡§¶‡•á‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•á‡§≤.">
                                Please describe any additional concerns, symptoms, or context you'd like to share about your general well-being or mental health. This information will help provide more personalized recommendations.
                            </span>
                        </p>
                        <textarea id="ghq12UserDescription" 
                                  placeholder="Share your thoughts, concerns, or any additional context..." 
                                  data-placeholder-en="Share your thoughts, concerns, or any additional context..."
                                  data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞, ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡•ã‡§£‡§§‡§æ‡§π‡•Ä ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ..."
                                  style="width: 100%; min-height: 100px; padding: 12px; border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; background: rgba(30, 41, 59, 0.5); color: #f3f4f6; font-family: inherit; resize: vertical;"
                                  maxlength="1000"></textarea>
                        <div style="text-align: right; margin-top: 5px; font-size: 12px; color: #9ca3af;">
                            <span id="ghq12CharCount">0/1000</span>
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 30px; text-align: center;">
                        <button type="button" onclick="calculateGHQ12Score()" class="submit-btn" style="margin-right: 15px;">
                            <span data-en="Calculate Results" data-mr="‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡§æ‡§¢‡§æ">Calculate Results</span>
                        </button>
                        <button type="button" onclick="resetScreening('ghq12')" style="background: #6b7280; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer;">
                            <span data-en="Reset" data-mr="‡§∞‡•Ä‡§∏‡•á‡§ü">Reset</span>
                        </button>
                    </div>
                </form>
                
                <div id="ghq12Results" class="screening-results" style="display: none; margin-top: 30px;"></div>
            </div>
        </div>

        <!-- Booking Section -->
        <div id="booking" class="content-area">
            <h2><span data-en="Book a Confidential Counseling Session" data-mr="‡§ó‡•Å‡§™‡•ç‡§§ ‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§® ‡§∏‡§§‡•ç‡§∞ ‡§¨‡•Å‡§ï ‡§ï‡§∞‡§æ">Book a Confidential Counseling Session</span></h2>
            <p style="margin-bottom: 30px; color: #9ca3af;"><span data-en="Schedule a session with our trained counselors. All appointments are completely confidential." data-mr="‡§Ü‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§ï‡§æ‡§Ç‡§∏‡•ã‡§¨‡§§ ‡§∏‡§§‡•ç‡§∞ ‡§®‡§ø‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§∞‡§æ. ‡§∏‡§∞‡•ç‡§µ ‡§≠‡•á‡§ü‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§£‡§™‡§£‡•á ‡§ó‡•Å‡§™‡•ç‡§§ ‡§Ü‡§π‡•á‡§§.">Schedule a session with our trained counselors. All appointments are completely confidential.</span></p>
            
            <form class="booking-form" onsubmit="handleBooking(event)">
                <div class="form-group">
                    <label for="studentId"><span data-en="Student ID (Optional - for record keeping)" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§Ü‡§Ø‡§°‡•Ä (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï - ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§†‡•á‡§µ‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä)">Student ID (Optional - for record keeping)</span></label>
                    <input type="text" id="studentId" data-placeholder-en="Leave blank for complete anonymity" data-placeholder-mr="‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Ö‡§ú‡•ç‡§û‡§æ‡§§‡§µ‡§æ‡§∏‡§æ‡§∏‡§æ‡§†‡•Ä ‡§∞‡§ø‡§ï‡•ç‡§§ ‡§†‡•á‡§µ‡§æ" placeholder="Leave blank for complete anonymity">
                </div>
                
                <div class="form-group">
                    <label for="preferredDate"><span data-en="Preferred Date" data-mr="‡§™‡§∏‡§Ç‡§§‡•Ä‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ">Preferred Date</span></label>
                    <input type="date" id="preferredDate" required>
                </div>
                
                <div class="form-group">
                    <label for="preferredTime"><span data-en="Preferred Time" data-mr="‡§™‡§∏‡§Ç‡§§‡•Ä‡§ö‡•Ä ‡§µ‡•á‡§≥">Preferred Time</span></label>
                    <select id="preferredTime" required>
                        <option value=""><span data-en="Select a time" data-mr="‡§µ‡•á‡§≥ ‡§®‡§ø‡§µ‡§°‡§æ">Select a time</span></option>
                        <option value="09:00"><span data-en="9:00 AM" data-mr="‡§∏‡§ï‡§æ‡§≥‡•Ä ‡•Ø:‡•¶‡•¶">9:00 AM</span></option>
                        <option value="10:00"><span data-en="10:00 AM" data-mr="‡§∏‡§ï‡§æ‡§≥‡•Ä ‡•ß‡•¶:‡•¶‡•¶">10:00 AM</span></option>
                        <option value="11:00"><span data-en="11:00 AM" data-mr="‡§∏‡§ï‡§æ‡§≥‡•Ä ‡•ß‡•ß:‡•¶‡•¶">11:00 AM</span></option>
                        <option value="14:00"><span data-en="2:00 PM" data-mr="‡§¶‡•Å‡§™‡§æ‡§∞‡•Ä ‡•®:‡•¶‡•¶">2:00 PM</span></option>
                        <option value="15:00"><span data-en="3:00 PM" data-mr="‡§¶‡•Å‡§™‡§æ‡§∞‡•Ä ‡•©:‡•¶‡•¶">3:00 PM</span></option>
                        <option value="16:00"><span data-en="4:00 PM" data-mr="‡§¶‡•Å‡§™‡§æ‡§∞‡•Ä ‡•™:‡•¶‡•¶">4:00 PM</span></option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="sessionType"><span data-en="Session Type" data-mr="‡§∏‡§§‡•ç‡§∞‡§æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞">Session Type</span></label>
                    <select id="sessionType" required>
                        <option value=""><span data-en="Choose session type" data-mr="‡§∏‡§§‡•ç‡§∞‡§æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ">Choose session type</span></option>
                        <option value="individual"><span data-en="Individual Counseling" data-mr="‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§®">Individual Counseling</span></option>
                        <option value="group"><span data-en="Group Session" data-mr="‡§∏‡§Æ‡•Ç‡§π ‡§∏‡§§‡•ç‡§∞">Group Session</span></option>
                        <option value="crisis"><span data-en="Crisis Intervention" data-mr="‡§∏‡§Ç‡§ï‡§ü ‡§π‡§∏‡•ç‡§§‡§ï‡•ç‡§∑‡•á‡§™">Crisis Intervention</span></option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="concerns"><span data-en="Brief Description of Concerns (Optional)" data-mr="‡§ö‡§ø‡§Ç‡§§‡§æ‡§Ç‡§ö‡•á ‡§•‡•ã‡§°‡§ï‡•ç‡§Ø‡§æ‡§§ ‡§µ‡§∞‡•ç‡§£‡§® (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)">Brief Description of Concerns (Optional)</span></label>
                    <textarea id="concerns" rows="4" data-placeholder-en="This helps us assign the most suitable counselor..." data-placeholder-mr="‡§π‡•á ‡§Ü‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§§ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§ï ‡§®‡•á‡§Æ‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡§§‡•á..." placeholder="This helps us assign the most suitable counselor..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="contactMethod"><span data-en="Preferred Contact Method" data-mr="‡§™‡§∏‡§Ç‡§§‡•Ä‡§ö‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§™‡§¶‡•ç‡§ß‡§§">Preferred Contact Method</span></label>
                    <select id="contactMethod" required>
                        <option value=""><span data-en="How should we contact you?" data-mr="‡§Ü‡§Æ‡•ç‡§π‡•Ä ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ‡§∂‡•Ä ‡§ï‡§∏‡§æ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡•Ç?">How should we contact you?</span></option>
                        <option value="email"><span data-en="Email" data-mr="‡§à‡§Æ‡•á‡§≤">Email</span></option>
                        <option value="phone"><span data-en="Phone" data-mr="‡§´‡•ã‡§®">Phone</span></option>
                        <option value="campus-message"><span data-en="Campus Message System" data-mr="‡§ï‡•Ö‡§Æ‡•ç‡§™‡§∏ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä">Campus Message System</span></option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="contactInfo"><span data-en="Contact Information" data-mr="‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä">Contact Information</span></label>
                    <input type="text" id="contactInfo" data-placeholder-en="Email or phone number" data-placeholder-mr="‡§à‡§Æ‡•á‡§≤ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞" placeholder="Email or phone number" required>
                </div>
                
                <button type="submit" class="submit-btn"><span data-en="Schedule Appointment" data-mr="‡§≠‡•á‡§ü ‡§®‡§ø‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§∞‡§æ">Schedule Appointment</span></button>
            </form>
        </div>

        <!-- Resources Section -->
        <div id="resources" class="content-area">
            <div id="resourcesHome">
                <h2><span data-en="Mental Wellness Resources" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á">Mental Wellness Resources</span></h2>
                <p style="margin-bottom: 30px; color: #9ca3af;"><span data-en="Access our collection of self-help tools, guides, and educational materials designed specifically for students." data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§É ‡§°‡§ø‡§ù‡§æ‡§á‡§® ‡§ï‡•á‡§≤‡•á‡§≤‡•ç‡§Ø‡§æ ‡§∏‡•ç‡§µ-‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§∏‡§æ‡§ß‡§®‡•á, ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ï ‡§Ü‡§£‡§ø ‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä‡§ö‡§æ ‡§Ü‡§Æ‡§ö‡§æ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π ‡§™‡§π‡§æ.">Access our collection of self-help tools, guides, and educational materials designed specifically for students.</span></p>
                
                <div class="resource-grid">
                    <div class="resource-card" onclick="showResourceDetail('breathing')">
                        <h3>ü´Å <span data-en="Breathing Exercises" data-mr="‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ">Breathing Exercises</span></h3>
                        <p><span data-en="Guided breathing techniques for anxiety and stress relief" data-mr="‡§ö‡§ø‡§Ç‡§§‡§æ ‡§Ü‡§£‡§ø ‡§§‡§£‡§æ‡§µ ‡§ï‡§Æ‡•Ä ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§§‡§Ç‡§§‡•ç‡§∞">Guided breathing techniques for anxiety and stress relief</span></p>
                    </div>
                    
                    <div class="resource-card" onclick="showResourceDetail('meditation')">
                        <h3>üßò <span data-en="Meditation Guide" data-mr="‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ï">Meditation Guide</span></h3>
                        <p><span data-en="Mindfulness and meditation practices for beginners" data-mr="‡§®‡§µ‡§∂‡§ø‡§ï‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Æ‡§®‡§É‡§∂‡§æ‡§Ç‡§§‡•Ä ‡§Ü‡§£‡§ø ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏">Mindfulness and meditation practices for beginners</span></p>
                    </div>
                    
                    <div class="resource-card" onclick="showResourceDetail('videos')">
                        <h3>üì∫ <span data-en="Mental Health Videos" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì">Mental Health Videos</span></h3>
                        <p><span data-en="Curated YouTube videos on mental wellness and coping strategies" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§Ü‡§£‡§ø ‡§∏‡§æ‡§Æ‡§®‡§æ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§∞‡§£‡§®‡•Ä‡§§‡•Ä‡§Ç‡§µ‡§∞ ‡§®‡§ø‡§µ‡§°‡§ï YouTube ‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì">Curated YouTube videos on mental wellness and coping strategies</span></p>
                    </div>
                    
                    <div class="resource-card" onclick="showResourceDetail('academic')">
                        <h3>üìö <span data-en="Academic Stress" data-mr="‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§§‡§£‡§æ‡§µ">Academic Stress</span></h3>
                        <p><span data-en="Managing study stress and exam anxiety effectively" data-mr="‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏‡§æ‡§ö‡§æ ‡§§‡§£‡§æ‡§µ ‡§Ü‡§£‡§ø ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡•á‡§ö‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä‡§™‡§£‡•á ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§£‡•á">Managing study stress and exam anxiety effectively</span></p>
                    </div>
                    
                    <div class="resource-card" onclick="showResourceDetail('sleep')">
                        <h3>üò¥ <span data-en="Sleep Hygiene" data-mr="‡§ù‡•ã‡§™‡•á‡§ö‡•Ä ‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ">Sleep Hygiene</span></h3>
                        <p><span data-en="Tips for better sleep and managing sleep disorders" data-mr="‡§ö‡§æ‡§Ç‡§ó‡§≤‡•Ä ‡§ù‡•ã‡§™ ‡§Ü‡§£‡§ø ‡§ù‡•ã‡§™‡•á‡§ö‡•ç‡§Ø‡§æ ‡§µ‡§ø‡§ï‡§æ‡§∞‡§æ‡§Ç‡§®‡§æ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ü‡§ø‡§™‡•ç‡§∏">Tips for better sleep and managing sleep disorders</span></p>
                    </div>
                    
                    <div class="resource-card" onclick="showResourceDetail('emergency')">
                        <h3>üÜò <span data-en="Crisis Resources" data-mr="‡§∏‡§Ç‡§ï‡§ü ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á">Crisis Resources</span></h3>
                        <p><span data-en="Emergency contacts and immediate help resources" data-mr="‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§Ü‡§£‡§ø ‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≥ ‡§Æ‡§¶‡§§ ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á">Emergency contacts and immediate help resources</span></p>
                    </div>
                </div>
            </div>

            <!-- Resource Detail Views -->
            <div id="breathingDetail" class="resource-detail" style="display: none;">
                <button class="back-btn" onclick="showResourcesHome()">‚Üê <span data-en="Back to Resources" data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Resources</span></button>
                <h2>ü´Å <span data-en="Breathing Exercises for Stress Relief" data-mr="‡§§‡§£‡§æ‡§µ ‡§ï‡§Æ‡•Ä ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ">Breathing Exercises for Stress Relief</span></h2>
                
                <div class="exercise-card">
                    <h4><span data-en="4-7-8 Breathing Technique" data-mr="‡•™-‡•≠-‡•Æ ‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§§‡§Ç‡§§‡•ç‡§∞">4-7-8 Breathing Technique</span></h4>
                    <ol class="exercise-steps">
                        <li><span data-en="Sit comfortably with your back straight" data-mr="‡§™‡§æ‡§† ‡§∏‡§∞‡§≥ ‡§†‡•á‡§µ‡•Ç‡§® ‡§Ü‡§∞‡§æ‡§Æ‡§æ‡§§ ‡§¨‡§∏‡§æ">Sit comfortably with your back straight</span></li>
                        <li><span data-en="Inhale through your nose for 4 counts" data-mr="‡§®‡§æ‡§ï‡§æ‡§§‡•Ç‡§® ‡•™ ‡§Æ‡•ã‡§ú‡§£‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§ò‡•ç‡§Ø‡§æ">Inhale through your nose for 4 counts</span></li>
                        <li><span data-en="Hold your breath for 7 counts" data-mr="‡•≠ ‡§Æ‡•ã‡§ú‡§£‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∞‡•ã‡§ñ‡§æ">Hold your breath for 7 counts</span></li>
                        <li><span data-en="Exhale through your mouth for 8 counts" data-mr="‡§§‡•ã‡§Ç‡§°‡§æ‡§§‡•Ç‡§® ‡•Æ ‡§Æ‡•ã‡§ú‡§£‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•ã‡§°‡§æ">Exhale through your mouth for 8 counts</span></li>
                        <li><span data-en="Repeat 3-4 times" data-mr="‡•©-‡•™ ‡§µ‡•á‡§≥‡§æ ‡§ï‡§∞‡§æ">Repeat 3-4 times</span></li>
                    </ol>
                </div>
            </div>

            <div id="meditationDetail" class="resource-detail" style="display: none;">
                <button class="back-btn" onclick="showResourcesHome()">‚Üê <span data-en="Back to Resources" data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Resources</span></button>
                <h2>üßò <span data-en="Meditation Guide for Students" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ï">Meditation Guide for Students</span></h2>
                
                <div class="meditation-timer">
                    <h4><span data-en="Guided Meditation Timer" data-mr="‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ü‡§æ‡§á‡§Æ‡§∞">Guided Meditation Timer</span></h4>
                    <div class="timer-display" id="timerDisplay">05:00</div>
                    <button class="timer-btn" onclick="startTimer(5)"><span data-en="5 Min" data-mr="‡•´ ‡§Æ‡§ø‡§®‡§ø‡§ü">5 Min</span></button>
                    <button class="timer-btn" onclick="startTimer(10)"><span data-en="10 Min" data-mr="‡•ß‡•¶ ‡§Æ‡§ø‡§®‡§ø‡§ü">10 Min</span></button>
                    <button class="timer-btn" onclick="startTimer(15)"><span data-en="15 Min" data-mr="‡•ß‡•´ ‡§Æ‡§ø‡§®‡§ø‡§ü">15 Min</span></button>
                    <br><br>
                    <button class="timer-btn" id="timerControl" onclick="toggleTimer()"><span data-en="Start" data-mr="‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§">Start</span></button>
                    <button class="timer-btn" onclick="resetTimer()"><span data-en="Reset" data-mr="‡§∞‡•Ä‡§∏‡•á‡§ü">Reset</span></button>
                    
                    <!-- Enhanced Music Controls -->
                    <div class="music-player" style="margin-top: 25px; padding: 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(99, 102, 241, 0.1)); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 12px; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.1);">
                        <!-- Music Header -->
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #8b5cf6, #6366f1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                                <span style="font-size: 18px;">üéµ</span>
                            </div>
                            <div>
                                <h5 style="margin: 0; color: #f3f4f6; font-size: 16px; font-weight: 600;">
                                    <span data-en="Meditation Music" data-mr="‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∏‡§Ç‡§ó‡•Ä‡§§">Meditation Music</span>
                                </h5>
                                <p style="margin: 0; color: #9ca3af; font-size: 12px;">
                                    <span data-en="Calming background music for your session" data-mr="‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§∏‡§§‡•ç‡§∞‡§æ‡§∏‡§æ‡§†‡•Ä ‡§∂‡§æ‡§Ç‡§§ ‡§™‡§æ‡§∞‡•ç‡§∂‡•ç‡§µ‡§∏‡§Ç‡§ó‡•Ä‡§§">Calming background music for your session</span>
                                </p>
                            </div>
                        </div>
                        
                        <!-- Music Controls Row -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                            <!-- Play/Stop Button -->
                            <button id="musicToggle" onclick="toggleMeditationMusic()" 
                                    style="display: flex; align-items: center; gap: 8px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 10px 16px; border-radius: 25px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);"
                                    onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(139, 92, 246, 0.3)'">
                                <span id="musicIcon">‚ñ∂Ô∏è</span>
                                <span data-en="Play Music" data-mr="‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§ö‡§æ‡§≤‡§µ‡§æ">Play Music</span>
                            </button>
                            
                            <!-- Volume Control -->
                            <div style="display: flex; align-items: center; gap: 8px; background: rgba(30, 41, 59, 0.5); padding: 8px 12px; border-radius: 20px; border: 1px solid rgba(139, 92, 246, 0.2);">
                                <span style="font-size: 14px; color: #a78bfa;">üîä</span>
                                <input type="range" id="musicVolume" min="0" max="100" value="50" onchange="setMusicVolume(this.value)" 
                                       style="width: 80px; height: 4px; background: rgba(139, 92, 246, 0.3); border-radius: 2px; outline: none; -webkit-appearance: none; cursor: pointer;">
                                <span id="volumeDisplay" style="font-size: 12px; color: #9ca3af; min-width: 30px;">50%</span>
                            </div>
                        </div>
                        
                        <!-- Music Status Indicator -->
                        <div id="musicStatus" style="display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.2); border-radius: 8px; margin-bottom: 10px; display: none;">
                            <div style="width: 8px; height: 8px; background: #06b6d4; border-radius: 50%; animation: pulse 2s infinite;"></div>
                            <span style="color: #06b6d4; font-size: 12px;">
                                <span data-en="Music is playing..." data-mr="‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§µ‡§æ‡§ú‡§§ ‡§Ü‡§π‡•á...">Music is playing...</span>
                            </span>
                        </div>
                        
                        <!-- Hidden Audio Element -->
                        <audio id="meditationAudio" loop preload="auto" style="display: none;">
                            <source src="/music/meditation-music.mp3" type="audio/mpeg">
                            <source src="/music/30%20Minute%20Deep%20Meditation%20Music%20for%20Positive%20Energy%20%E2%80%A2%20Relax%20Mind%20Body%2C%20Inner%20Peace%20[YRJ6xoiRcpQ].mp3" type="audio/mpeg">
                            Your browser does not support the audio element.
                        </audio>
                        
                        <!-- Help Text -->
                        <p style="font-size: 11px; color: #6b7280; margin: 0; text-align: center; line-height: 1.4;">
                            <span data-en="üí° Music will automatically sync with your meditation timer" 
                                  data-mr="üí° ‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ü‡§æ‡§á‡§Æ‡§∞‡§∏‡§π ‡§Ü‡§™‡•ã‡§Ü‡§™ ‡§∏‡§Æ‡§ï‡•ç‡§∞‡§Æ‡§ø‡§§ ‡§π‡•ã‡§à‡§≤">
                                üí° Music will automatically sync with your meditation timer
                            </span>
                        </p>
                    </div>
                </div>
            </div>

            <div id="videosDetail" class="resource-detail" style="display: none;">
                <button class="back-btn" onclick="showResourcesHome()">‚Üê <span data-en="Back to Resources" data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Resources</span></button>
                <h2>üì∫ <span data-en="Mental Health Educational Videos" data-mr="‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì">Mental Health Educational Videos</span></h2>
                
                <div class="video-grid">
                    <div class="video-card">
                        <h4><span data-en="Understanding Anxiety" data-mr="‡§ö‡§ø‡§Ç‡§§‡§æ ‡§∏‡§Æ‡§ú‡•Ç‡§® ‡§ò‡•á‡§£‡•á">Understanding Anxiety</span></h4>
                        <p><span data-en="Learn about anxiety disorders and coping mechanisms" data-mr="‡§ö‡§ø‡§Ç‡§§‡§æ ‡§µ‡§ø‡§ï‡§æ‡§∞ ‡§Ü‡§£‡§ø ‡§∏‡§æ‡§Æ‡§®‡§æ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£‡§æ‡§Ç‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§ú‡§æ‡§£‡•Ç‡§® ‡§ò‡•ç‡§Ø‡§æ">Learn about anxiety disorders and coping mechanisms</span></p>
                        <a href="https://www.youtube.com/watch?v=WWloIAQpMcQ" target="_blank" class="video-link">
                            <span data-en="Watch on YouTube" data-mr="YouTube ‡§µ‡§∞ ‡§™‡§π‡§æ">Watch on YouTube</span> üé•
                        </a>
                    </div>
                    
                    <div class="video-card">
                        <h4><span data-en="Mindfulness for Students" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Æ‡§®‡§É‡§∂‡§æ‡§Ç‡§§‡•Ä">Mindfulness for Students</span></h4>
                        <p><span data-en="Practical mindfulness techniques for academic life" data-mr="‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§ú‡•Ä‡§µ‡§®‡§æ‡§∏‡§æ‡§†‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§π‡§æ‡§∞‡§ø‡§ï ‡§Æ‡§®‡§É‡§∂‡§æ‡§Ç‡§§‡•Ä ‡§§‡§Ç‡§§‡•ç‡§∞">Practical mindfulness techniques for academic life</span></p>
                        <a href="https://www.youtube.com/watch?v=ZToicYcHIOU" target="_blank" class="video-link">
                            <span data-en="Watch on YouTube" data-mr="YouTube ‡§µ‡§∞ ‡§™‡§π‡§æ">Watch on YouTube</span> üé•
                        </a>
                    </div>
                    
                    <div class="video-card">
                        <h4><span data-en="Dealing with Depression" data-mr="‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø‡§æ‡§≤‡§æ ‡§∏‡§æ‡§Æ‡•ã‡§∞‡•á ‡§ú‡§æ‡§£‡•á">Dealing with Depression</span></h4>
                        <p><span data-en="Understanding depression and seeking help" data-mr="‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø ‡§∏‡§Æ‡§ú‡•Ç‡§® ‡§ò‡•á‡§£‡•á ‡§Ü‡§£‡§ø ‡§Æ‡§¶‡§§ ‡§Æ‡§æ‡§ó‡§£‡•á">Understanding depression and seeking help</span></p>
                        <a href="https://www.youtube.com/watch?v=z-IR48Mb3W0" target="_blank" class="video-link">
                            <span data-en="Watch on YouTube" data-mr="YouTube ‡§µ‡§∞ ‡§™‡§π‡§æ">Watch on YouTube</span> üé•
                        </a>
                    </div>
                    
                    <div class="video-card">
                        <h4><span data-en="Stress Management Techniques" data-mr="‡§§‡§£‡§æ‡§µ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§® ‡§§‡§Ç‡§§‡•ç‡§∞">Stress Management Techniques</span></h4>
                        <p><span data-en="Evidence-based strategies for managing stress" data-mr="‡§§‡§£‡§æ‡§µ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ‡§∏‡§æ‡§†‡•Ä ‡§™‡•Å‡§∞‡§æ‡§µ‡§æ-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∞‡§£‡§®‡•Ä‡§§‡•Ä">Evidence-based strategies for managing stress</span></p>
                        <a href="https://www.youtube.com/watch?v=hnpQrMqDoqE" target="_blank" class="video-link">
                            <span data-en="Watch on YouTube" data-mr="YouTube ‡§µ‡§∞ ‡§™‡§π‡§æ">Watch on YouTube</span> üé•
                        </a>
                    </div>
                    
                    <div class="video-card">
                        <h4><span data-en="Building Resilience" data-mr="‡§≤‡§µ‡§ö‡§ø‡§ï‡§§‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§∞‡§£‡•á">Building Resilience</span></h4>
                        <p><span data-en="How to bounce back from setbacks and challenges" data-mr="‡§Ö‡§°‡§ö‡§£‡•Ä ‡§Ü‡§£‡§ø ‡§Ü‡§µ‡•ç‡§π‡§æ‡§®‡§æ‡§Ç‡§Æ‡§ß‡•Ç‡§® ‡§ï‡§∏‡•á ‡§™‡§∞‡§§ ‡§Ø‡•á‡§£‡•á">How to bounce back from setbacks and challenges</span></p>
                        <a href="https://www.youtube.com/watch?v=NWH8N-BvhAw" target="_blank" class="video-link">
                            <span data-en="Watch on YouTube" data-mr="YouTube ‡§µ‡§∞ ‡§™‡§π‡§æ">Watch on YouTube</span> üé•
                        </a>
                    </div>
                    
                    <div class="video-card">
                        <h4><span data-en="Sleep and Mental Health" data-mr="‡§ù‡•ã‡§™ ‡§Ü‡§£‡§ø ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø">Sleep and Mental Health</span></h4>
                        <p><span data-en="The connection between sleep quality and mental wellness" data-mr="‡§ù‡•ã‡§™‡•á‡§ö‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§Ü‡§£‡§ø ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§Ø‡§æ‡§Ç‡§ö‡•ç‡§Ø‡§æ‡§§‡•Ä‡§≤ ‡§∏‡§Ç‡§¨‡§Ç‡§ß">The connection between sleep quality and mental wellness</span></p>
                        <a href="https://www.youtube.com/watch?v=5MuIMqhT8DM" target="_blank" class="video-link">
                            <span data-en="Watch on YouTube" data-mr="YouTube ‡§µ‡§∞ ‡§™‡§π‡§æ">Watch on YouTube</span> üé•
                        </a>
                    </div>
                </div>
            </div>

            <div id="academicDetail" class="resource-detail" style="display: none;">
                <button class="back-btn" onclick="showResourcesHome()">‚Üê <span data-en="Back to Resources" data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Resources</span></button>
                <h2>üìö <span data-en="Managing Academic Stress" data-mr="‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§§‡§£‡§æ‡§µ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§£‡•á">Managing Academic Stress</span></h2>
                
                <div class="tip-box">
                    <h4>üí° <span data-en="Academic Stress Busters" data-mr="‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§§‡§£‡§æ‡§µ ‡§ï‡§Æ‡•Ä ‡§ï‡§∞‡§£‡§æ‡§∞‡•á">Academic Stress Busters</span></h4>
                    <ul>
                        <li><span data-en="Break large tasks into smaller, manageable chunks" data-mr="‡§Æ‡•ã‡§†‡•Ä ‡§ï‡§æ‡§Æ‡•á ‡§õ‡•ã‡§ü‡•ç‡§Ø‡§æ, ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡•Ä‡§Ø ‡§≠‡§æ‡§ó‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§µ‡§ø‡§≠‡§æ‡§ó‡•Ç‡§® ‡§ï‡§∞‡§æ">Break large tasks into smaller, manageable chunks</span></li>
                        <li><span data-en="Use the Pomodoro Technique (25 min work, 5 min break)" data-mr="‡§™‡•ã‡§Æ‡•ã‡§°‡•ã‡§∞‡•ã ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§µ‡§æ‡§™‡§∞‡§æ (‡•®‡•´ ‡§Æ‡§ø‡§®‡§ø‡§ü ‡§ï‡§æ‡§Æ, ‡•´ ‡§Æ‡§ø‡§®‡§ø‡§ü ‡§µ‡§ø‡§∂‡•ç‡§∞‡§æ‡§Ç‡§§‡•Ä)">Use the Pomodoro Technique (25 min work, 5 min break)</span></li>
                        <li><span data-en="Exercise regularly to reduce stress hormones" data-mr="‡§§‡§£‡§æ‡§µ‡§æ‡§ö‡•á ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§®‡•ç‡§∏ ‡§ï‡§Æ‡•Ä ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ ‡§ï‡§∞‡§æ">Exercise regularly to reduce stress hormones</span></li>
                        <li><span data-en="Remember: grades don't define your worth" data-mr="‡§≤‡§ï‡•ç‡§∑‡§æ‡§§ ‡§†‡•á‡§µ‡§æ: ‡§ó‡•Å‡§£ ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§ï‡§ø‡§Ç‡§Æ‡§§ ‡§†‡§∞‡§µ‡§§ ‡§®‡§æ‡§π‡•Ä‡§§">Remember: grades don't define your worth</span></li>
                    </ul>
                </div>
            </div>

            <div id="sleepDetail" class="resource-detail" style="display: none;">
                <button class="back-btn" onclick="showResourcesHome()">‚Üê <span data-en="Back to Resources" data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Resources</span></button>
                <h2>üò¥ <span data-en="Sleep Hygiene for Better Mental Health" data-mr="‡§ö‡§æ‡§Ç‡§ó‡§≤‡•ç‡§Ø‡§æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ù‡•ã‡§™‡•á‡§ö‡•Ä ‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ">Sleep Hygiene for Better Mental Health</span></h2>
                
                <div class="tip-box">
                    <h4>üí° <span data-en="Sleep Tips for Students" data-mr="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§ù‡•ã‡§™‡•á‡§ö‡•ç‡§Ø‡§æ ‡§ü‡§ø‡§™‡•ç‡§∏">Sleep Tips for Students</span></h4>
                    <ul>
                        <li><span data-en="Maintain a consistent sleep schedule" data-mr="‡§∏‡•Å‡§∏‡§Ç‡§ó‡§§ ‡§ù‡•ã‡§™‡•á‡§ö‡•á ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï ‡§†‡•á‡§µ‡§æ">Maintain a consistent sleep schedule</span></li>
                        <li><span data-en="Avoid screens 1 hour before bedtime" data-mr="‡§ù‡•ã‡§™‡§£‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡•ß ‡§§‡§æ‡§∏ ‡§Ü‡§ß‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ü‡§æ‡§≥‡§æ">Avoid screens 1 hour before bedtime</span></li>
                        <li><span data-en="Create a relaxing bedtime routine" data-mr="‡§Ü‡§∞‡§æ‡§Æ‡§¶‡§æ‡§Ø‡§ï ‡§ù‡•ã‡§™‡§£‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§¶‡§ø‡§®‡§ö‡§∞‡•ç‡§Ø‡§æ ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ">Create a relaxing bedtime routine</span></li>
                        <li><span data-en="Keep your bedroom cool, dark, and quiet" data-mr="‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§∂‡§Ø‡§®‡§ï‡§ï‡•ç‡§∑ ‡§•‡§Ç‡§°, ‡§Ö‡§Ç‡§ß‡§æ‡§∞‡•Ä ‡§Ü‡§£‡§ø ‡§∂‡§æ‡§Ç‡§§ ‡§†‡•á‡§µ‡§æ">Keep your bedroom cool, dark, and quiet</span></li>
                    </ul>
                </div>
            </div>

            <div id="emergencyDetail" class="resource-detail" style="display: none;">
                <button class="back-btn" onclick="showResourcesHome()">‚Üê <span data-en="Back to Resources" data-mr="‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ï‡§°‡•á ‡§™‡§∞‡§§">Back to Resources</span></button>
                <h2>üÜò <span data-en="Crisis Resources & Emergency Support" data-mr="‡§∏‡§Ç‡§ï‡§ü ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á ‡§Ü‡§£‡§ø ‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Crisis Resources & Emergency Support</span></h2>
                
                <div class="emergency-card">
                    <h4>üö® <span data-en="Immediate Crisis Support" data-mr="‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≥ ‡§∏‡§Ç‡§ï‡§ü ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Immediate Crisis Support</span></h4>
                    <ul>
                        <li><strong><span data-en="National Suicide Prevention Lifeline:" data-mr="‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ü‡§§‡•ç‡§Æ‡§π‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§Ç‡§ß ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:">National Suicide Prevention Lifeline:</span></strong> <a href="tel:988">988</a></li>
                        <li><strong><span data-en="Crisis Text Line:" data-mr="‡§∏‡§Ç‡§ï‡§ü ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§≤‡§æ‡§á‡§®:">Crisis Text Line:</span></strong> <span data-en="Text HOME to 741741" data-mr="741741 ‡§µ‡§∞ HOME ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§™‡§æ‡§†‡§µ‡§æ">Text HOME to 741741</span></li>
                        <li><strong><span data-en="Campus Crisis Line:" data-mr="‡§ï‡•Ö‡§Æ‡•ç‡§™‡§∏ ‡§∏‡§Ç‡§ï‡§ü ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:">Campus Crisis Line:</span></strong> <a href="tel:+1234567890">+1-234-567-890</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Peer Support Section -->
        <div id="peer-support" class="content-area">
            <h2><span data-en="Peer Support Community" data-mr="‡§∏‡§Æ‡§µ‡§Ø‡§∏‡•ç‡§ï ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø">Peer Support Community</span></h2>
            <p style="margin-bottom: 30px; color: #9ca3af;"><span data-en="Connect with fellow students in a safe, moderated environment. Share experiences and support each other." data-mr="‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§, ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£‡§æ‡§§ ‡§∏‡§π‡§ï‡§æ‡§∞‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∂‡•Ä ‡§ú‡•Å‡§≥‡§µ‡§æ. ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§è‡§ï‡§Æ‡•á‡§ï‡§æ‡§Ç‡§®‡§æ ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§ï‡§∞‡§æ.">Connect with fellow students in a safe, moderated environment. Share experiences and support each other.</span></p>
            
            <div style="margin-bottom: 30px;">
                <button class="submit-btn" onclick="showNewPostForm()"><span data-en="Share Your Story" data-mr="‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§ï‡§π‡§æ‡§£‡•Ä ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ">Share Your Story</span></button>
            </div>
            
            <div id="newPostForm" style="display: none; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(139, 92, 246, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                <h4 style="color: #c084fc; margin-bottom: 15px;"><span data-en="Share Anonymously" data-mr="‡§Ö‡§ú‡•ç‡§û‡§æ‡§§‡§™‡§£‡•á ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ">Share Anonymously</span></h4>
                <textarea id="newPostContent" rows="4" style="width: 100%; margin: 10px 0; padding: 12px; border-radius: 8px; background: rgba(15, 23, 42, 0.7); border: 1px solid rgba(139, 92, 246, 0.3); color: #f3f4f6;" data-placeholder-en="Share your experience, ask for advice, or offer support to others..." data-placeholder-mr="‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ, ‡§∏‡§≤‡•ç‡§≤‡§æ ‡§µ‡§ø‡§ö‡§æ‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§á‡§§‡§∞‡§æ‡§Ç‡§®‡§æ ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø ‡§ë‡§´‡§∞ ‡§ï‡§∞‡§æ..." placeholder="Share your experience, ask for advice, or offer support to others..."></textarea>
                <div style="margin: 10px 0; color: #9ca3af; font-size: 14px;">
                    <span data-en="Your post will be categorized automatically based on content. All posts are anonymous." data-mr="‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§™‡•ã‡§∏‡•ç‡§ü ‡§Ü‡§™‡•ã‡§Ü‡§™ ‡§µ‡§∞‡•ç‡§ó‡•Ä‡§ï‡•É‡§§ ‡§ï‡•á‡§≤‡•Ä ‡§ú‡§æ‡§à‡§≤. ‡§∏‡§∞‡•ç‡§µ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§Ü‡§π‡•á‡§§.">Your post will be categorized automatically based on content. All posts are anonymous.</span>
                </div>
                <button onclick="submitPost()" class="submit-btn" style="margin-right: 10px;"><span data-en="Post" data-mr="‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡§æ">Post</span></button>
                <button onclick="cancelPost()" style="background: #6b7280; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;"><span data-en="Cancel" data-mr="‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡§æ">Cancel</span></button>
            </div>
            
            <div class="forum-posts" id="forumPosts">
                <div class="forum-post">
                    <h4><span data-en="Dealing with Exam Anxiety" data-mr="‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ö‡§ø‡§Ç‡§§‡•á‡§≤‡§æ ‡§∏‡§æ‡§Æ‡•ã‡§∞‡•á ‡§ú‡§æ‡§£‡•á">Dealing with Exam Anxiety</span></h4>
                    <div class="post-meta"><span data-en="Anonymous Student ‚Ä¢ 2 hours ago" data-mr="‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‚Ä¢ ‡•® ‡§§‡§æ‡§∏‡§æ‡§Ç‡§™‡•Ç‡§∞‡•ç‡§µ‡•Ä">Anonymous Student ‚Ä¢ 2 hours ago</span></div>
                    <p><span data-en="I've been struggling with severe anxiety before exams. My heart races and I can't focus. Has anyone found techniques that actually work?" data-mr="‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡•á‡§™‡•Ç‡§∞‡•ç‡§µ‡•Ä ‡§Æ‡§≤‡§æ ‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á. ‡§Æ‡§æ‡§ù‡•á ‡§π‡•É‡§¶‡§Ø ‡§µ‡•á‡§ó‡§æ‡§®‡•á ‡§ß‡§°‡§ß‡§°‡§§‡•á ‡§Ü‡§£‡§ø ‡§Æ‡•Ä ‡§≤‡§ï‡•ç‡§∑ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§ ‡§®‡§æ‡§π‡•Ä. ‡§ï‡•ã‡§£‡§æ‡§≤‡§æ ‡§Ö‡§∏‡•á ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§∏‡§æ‡§™‡§°‡§≤‡•á ‡§Ü‡§π‡•á‡§§ ‡§ú‡•á ‡§ñ‡§∞‡•ã‡§ñ‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ‡§§?">I've been struggling with severe anxiety before exams. My heart races and I can't focus. Has anyone found techniques that actually work?</span></p>
                    <div class="post-actions">
                        <button class="support-btn" onclick="showSupport(this)">üíô <span data-en="Support" data-mr="‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Support</span> (12)</button>
                        <button class="reply-btn" onclick="showReplyForm(this)">üí¨ <span data-en="Reply" data-mr="‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•ç‡§Ø‡§æ">Reply</span></button>
                    </div>
                </div>

                <div class="forum-post">
                    <h4><span data-en="Feeling Overwhelmed with Course Load" data-mr="‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏‡§ï‡•ç‡§∞‡§Æ‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§≠‡§æ‡§∞‡§æ‡§®‡•á ‡§≠‡§æ‡§∞‡§æ‡§µ‡•Ç‡§® ‡§ú‡§æ‡§£‡•á">Feeling Overwhelmed with Course Load</span></h4>
                    <div class="post-meta"><span data-en="Anonymous Student ‚Ä¢ 5 hours ago" data-mr="‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‚Ä¢ ‡•´ ‡§§‡§æ‡§∏‡§æ‡§Ç‡§™‡•Ç‡§∞‡•ç‡§µ‡•Ä">Anonymous Student ‚Ä¢ 5 hours ago</span></div>
                    <p><span data-en="Taking 6 courses this semester and working part-time. I feel like I'm drowning. Any advice on time management?" data-mr="‡§Ø‡§æ ‡§∏‡•á‡§Æ‡•á‡§∏‡•ç‡§ü‡§∞‡§Æ‡§ß‡•ç‡§Ø‡•á ‡•¨ ‡§ï‡•ã‡§∞‡•ç‡§∏ ‡§ò‡•á‡§§ ‡§Ü‡§π‡•á ‡§Ü‡§£‡§ø ‡§Ö‡§∞‡•ç‡§ß‡§µ‡•á‡§≥ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•á. ‡§Æ‡§≤‡§æ ‡§µ‡§æ‡§ü‡§§‡•á ‡§ï‡•Ä ‡§Æ‡•Ä ‡§¨‡•Å‡§°‡§§ ‡§Ü‡§π‡•á. ‡§µ‡•á‡§≥ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ‡§µ‡§∞ ‡§ï‡§æ‡§π‡•Ä ‡§∏‡§≤‡•ç‡§≤‡§æ ‡§Ü‡§π‡•á ‡§ï‡§æ?">Taking 6 courses this semester and working part-time. I feel like I'm drowning. Any advice on time management?</span></p>
                    <div class="post-actions">
                        <button class="support-btn" onclick="showSupport(this)">üíô <span data-en="Support" data-mr="‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Support</span> (8)</button>
                        <button class="reply-btn" onclick="showReplyForm(this)">üí¨ <span data-en="Reply" data-mr="‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•ç‡§Ø‡§æ">Reply</span></button>
                    </div>
                </div>

                <div class="forum-post">
                    <h4><span data-en="Success Story: Overcoming Social Anxiety" data-mr="‡§Ø‡§∂‡§æ‡§ö‡•Ä ‡§ï‡§π‡§æ‡§£‡•Ä: ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§ö‡§ø‡§Ç‡§§‡•á‡§µ‡§∞ ‡§Æ‡§æ‡§§ ‡§ï‡§∞‡§£‡•á">Success Story: Overcoming Social Anxiety</span></h4>
                    <div class="post-meta"><span data-en="Anonymous Student ‚Ä¢ 1 day ago" data-mr="‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‚Ä¢ ‡•ß ‡§¶‡§ø‡§µ‡§∏‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡•Ä">Anonymous Student ‚Ä¢ 1 day ago</span></div>
                    <p><span data-en="Just wanted to share that I finally joined a study group after months of avoiding social situations. Small steps really do work!" data-mr="‡§´‡§ï‡•ç‡§§ ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•á ‡§π‡•ã‡§§‡•á ‡§ï‡•Ä ‡§Æ‡§π‡§ø‡§®‡•ç‡§Ø‡§æ‡§Ç‡§®‡§Ç‡§§‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§ü‡§æ‡§≥‡§≤‡•ç‡§Ø‡§æ‡§®‡§Ç‡§§‡§∞ ‡§Æ‡•Ä ‡§∂‡•á‡§µ‡§ü‡•Ä ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ó‡§ü‡§æ‡§§ ‡§∏‡§æ‡§Æ‡•Ä‡§≤ ‡§ù‡§æ‡§≤‡•ã. ‡§õ‡•ã‡§ü‡•Ä ‡§™‡§æ‡§µ‡§≤‡•á ‡§ñ‡§∞‡•ã‡§ñ‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ‡§§!">Just wanted to share that I finally joined a study group after months of avoiding social situations. Small steps really do work!</span></p>
                    <div class="post-actions">
                        <button class="support-btn" onclick="showSupport(this)">üíô <span data-en="Support" data-mr="‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Support</span> (24)</button>
                        <button class="reply-btn" onclick="showReplyForm(this)">üí¨ <span data-en="Reply" data-mr="‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•ç‡§Ø‡§æ">Reply</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple MindCare App - Essential functionality only
        console.log('AarogyaTech app loading...');

        // Global variables
        let currentLanguage = 'en';

        // Login Selection Functions
        function showLoginSelection() {
            document.getElementById('loginSelection').style.display = 'flex';
            document.getElementById('studentLoginOverlay').style.display = 'none';
            document.getElementById('adminLoginOverlay').style.display = 'none';
        }

        function showStudentLogin() {
            document.getElementById('loginSelection').style.display = 'none';
            document.getElementById('studentLoginOverlay').style.display = 'flex';
        }

        function showAdminLogin() {
            document.getElementById('loginSelection').style.display = 'none';
            document.getElementById('adminLoginOverlay').style.display = 'flex';
        }

        // Student Login functionality
        function handleStudentLogin(event) {
            console.log('handleStudentLogin called');
            event.preventDefault();

            const email = document.getElementById('studentEmail').value;
            const password = document.getElementById('studentPassword').value;

            console.log('Student Email:', email, 'Password length:', password.length);

            if (email && password) {
                console.log('Student login successful, updating UI');

                // Update user info
                document.getElementById('currentUserName').textContent = email.split('@')[0];
                document.getElementById('currentUserEmail').textContent = email;

                // Hide login overlay and show main app
                document.getElementById('studentLoginOverlay').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';

                console.log('Student UI updated successfully');
            } else {
                console.log('Email or password missing');
                alert('Please enter both email and password');
            }
        }

        // Admin Login functionality
        function handleAdminLogin(event) {
            console.log('handleAdminLogin called');
            event.preventDefault();

            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            const role = document.getElementById('userRole').value;

            console.log('Admin Username:', username, 'Role:', role, 'Password length:', password.length);

            // Simple demo authentication
            const validCredentials = {
                'admin': 'admin123',
                'counselor': 'counselor123'
            };

            if (username && password && validCredentials[username] === password) {
                console.log('Admin login successful, redirecting to dashboard');
                
                // Redirect to admin dashboard
                window.location.href = 'admin-dashboard.html';
            } else {
                console.log('Invalid credentials');
                alert('Invalid credentials. Use admin/admin123 or counselor/counselor123');
            }
        }

        function logout() {
            console.log('Logout called');
            // Show login selection and hide main app
            document.getElementById('loginSelection').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';

            // Clear forms
            document.getElementById('studentEmail').value = '';
            document.getElementById('studentPassword').value = '';
            document.getElementById('adminUsername').value = '';
            document.getElementById('adminPassword').value = '';
        }

        // Language switching
        function switchLanguage(lang) {
            console.log('Switching language to:', lang);
            currentLanguage = lang;

            // Update language buttons
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('lang' + lang.charAt(0).toUpperCase() + lang.slice(1)).classList.add('active');

            // Update text content
            document.querySelectorAll('[data-' + lang + ']').forEach(element => {
                element.textContent = element.getAttribute('data-' + lang);
            });

            // Update placeholders
            document.querySelectorAll('[data-placeholder-' + lang + ']').forEach(element => {
                element.placeholder = element.getAttribute('data-placeholder-' + lang);
            });
        }

        // Simple navigation
        function showSection(sectionName) {
            console.log('Showing section:', sectionName);

            // Hide all sections
            document.querySelectorAll('.content-area').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Find and activate the corresponding nav button
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(sectionName)) {
                    btn.classList.add('active');
                }
            });
        }

        // Simple chat functionality (placeholder)
        // Enhanced chat functionality with AI integration
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            if (input && input.value.trim()) {
                const message = input.value.trim();
                console.log('Sending message:', message);

                // Add user message to chat
                addMessageToChat('user', message);

                // Clear input
                input.value = '';

                // Show processing indicator
                showProcessingIndicator();

                try {
                    // Get AI response
                    const response = await getAIResponse(message);

                    if (response) {
                        // Add bot response to chat
                        addMessageToChat('bot', response);

                        // If voice-to-voice mode, also play the response
                        if (currentVoiceMode === 'voice-to-voice') {
                            await textToSpeech(response);
                        }
                    }
                } catch (error) {
                    console.error('Error getting AI response:', error);
                    addMessageToChat('bot', "I'm sorry, I'm having trouble responding right now. Please try again.");
                } finally {
                    hideProcessingIndicator();
                }
            }
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chatMessages');
            if (chatMessages) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                messageDiv.innerHTML = `<div class="message-content">${message}</div>`;
                chatMessages.appendChild(messageDiv);

                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Handle Enter key in chat input
        function handleEnter(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Handle AI language selection
        function setAILanguage(language) {
            console.log('AI language set to:', language);
            // This would be used for API calls to set the AI response language
            // For now, we'll just log it
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function () {
            console.log('MindCare app initialized');

            // Set initial language
            switchLanguage('en');

            // Show login selection by default
            showLoginSelection();

            // Check voice feature availability
            checkVoiceFeatureSupport();
            
            // Initialize voice manager (after other initialization)
            setTimeout(initializeVoiceManager, 1000);

            console.log('App initialization complete');
        });

        // Check if voice features are supported
        function checkVoiceFeatureSupport() {
            const speechRecognitionSupported = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
            const speechSynthesisSupported = 'speechSynthesis' in window;
            
            console.log('Voice feature support:');
            console.log('- Speech Recognition:', speechRecognitionSupported);
            console.log('- Speech Synthesis:', speechSynthesisSupported);
            
            if (!speechRecognitionSupported) {
                console.warn('Speech recognition not supported in this browser');
                // You could show a warning to the user here
            }
            
            if (!speechSynthesisSupported) {
                console.warn('Speech synthesis not supported in this browser');
                // You could show a warning to the user here
            }
            
            return {
                speechRecognition: speechRecognitionSupported,
                speechSynthesis: speechSynthesisSupported
            };
        }

        // Booking functionality
        async function handleBooking(event) {
            event.preventDefault();
            console.log('Booking form submitted');
            
            const formData = {
                studentId: document.getElementById('studentId').value,
                preferredDate: document.getElementById('preferredDate').value,
                preferredTime: document.getElementById('preferredTime').value,
                sessionType: document.getElementById('sessionType').value,
                concerns: document.getElementById('concerns').value,
                contactMethod: document.getElementById('contactMethod').value,
                contactInfo: document.getElementById('contactInfo').value
            };
            
            console.log('Booking data:', formData);
            
            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span data-en="Submitting..." data-mr="‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•á...">Submitting...</span>';
            submitBtn.disabled = true;
            
            try {
                // Submit booking to backend API
                const response = await fetch('/api/booking/appointments', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    // Success - show confirmation
                    console.log('Booking created successfully:', result.booking);
                    
                    // Show success message with booking details
                    const message = currentLanguage === 'mr' ? 
                        `‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§≠‡•á‡§ü ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§™‡§£‡•á ‡§¨‡•Å‡§ï ‡§ù‡§æ‡§≤‡•Ä! ‡§≠‡•á‡§ü ID: ${result.booking.id}\n\n‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ 24 ‡§§‡§æ‡§∏‡§æ‡§Ç‡§ö‡•ç‡§Ø‡§æ ‡§Ü‡§§ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ø‡•á‡§à‡§≤.` :
                        `Appointment booked successfully! Booking ID: ${result.booking.id}\n\nYou will be contacted within 24 hours to confirm your session.`;
                    
                    alert(message);
                    
                    // Clear form
                    document.querySelector('.booking-form').reset();
                } else {
                    // Error from server
                    console.error('Booking submission failed:', result);
                    const errorMessage = currentLanguage === 'mr' ? 
                        `‡§≠‡•á‡§ü ‡§¨‡•Å‡§ï ‡§ï‡§∞‡§§‡§æ‡§®‡§æ ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: ${result.message || '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä'}` :
                        `Error booking appointment: ${result.message || 'Unknown error'}`;
                    alert(errorMessage);
                }
            } catch (error) {
                console.error('Network error during booking submission:', error);
                const errorMessage = currentLanguage === 'mr' ? 
                    '‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.' :
                    'Network error. Please try again.';
                alert(errorMessage);
            } finally {
                // Restore button state
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }

        // Resources functionality
        function showResourceDetail(resourceType) {
            console.log('Showing resource detail:', resourceType);
            
            // Hide resources home
            document.getElementById('resourcesHome').style.display = 'none';
            
            // Hide all resource details
            document.querySelectorAll('.resource-detail').forEach(detail => {
                detail.style.display = 'none';
            });
            
            // Show selected resource detail
            const detailElement = document.getElementById(resourceType + 'Detail');
            if (detailElement) {
                detailElement.style.display = 'block';
            }
        }

        function showResourcesHome() {
            console.log('Showing resources home');
            
            // Hide all resource details
            document.querySelectorAll('.resource-detail').forEach(detail => {
                detail.style.display = 'none';
            });
            
            // Show resources home
            document.getElementById('resourcesHome').style.display = 'block';
        }

        // Meditation timer functionality
        let timerInterval = null;
        let timerMinutes = 5;
        let timerSeconds = 0;
        let isTimerRunning = false;
        let meditationAudio = null;
        let isMusicPlaying = false;

        function startTimer(minutes) {
            timerMinutes = minutes;
            timerSeconds = 0;
            updateTimerDisplay();
        }

        function toggleTimer() {
            if (isTimerRunning) {
                pauseTimer();
            } else {
                resumeTimer();
            }
        }

        function resumeTimer() {
            isTimerRunning = true;
            document.getElementById('timerControl').innerHTML = '<span data-en="Pause" data-mr="‡§•‡§æ‡§Ç‡§¨‡§µ‡§æ">Pause</span>';
            
            // Start music if it was playing
            if (isMusicPlaying && meditationAudio) {
                meditationAudio.play().catch(e => console.log('Audio play failed:', e));
            }
            
            timerInterval = setInterval(() => {
                if (timerSeconds === 0) {
                    if (timerMinutes === 0) {
                        // Timer finished
                        pauseTimer();
                        stopMeditationMusic();
                        alert('Meditation session complete! üßò\nTake a moment to notice how you feel.');
                        return;
                    }
                    timerMinutes--;
                    timerSeconds = 59;
                } else {
                    timerSeconds--;
                }
                updateTimerDisplay();
            }, 1000);
        }

        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('timerControl').innerHTML = '<span data-en="Start" data-mr="‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§">Start</span>';
            
            // Pause music when timer is paused
            if (meditationAudio && isMusicPlaying) {
                meditationAudio.pause();
            }
        }

        function resetTimer() {
            pauseTimer();
            stopMeditationMusic();
            timerMinutes = 5;
            timerSeconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const display = document.getElementById('timerDisplay');
            if (display) {
                const mins = timerMinutes.toString().padStart(2, '0');
                const secs = timerSeconds.toString().padStart(2, '0');
                display.textContent = `${mins}:${secs}`;
            }
        }

        // Meditation music functions
        function initializeMeditationAudio() {
            meditationAudio = document.getElementById('meditationAudio');
            if (meditationAudio) {
                meditationAudio.volume = 0.5; // Set initial volume to 50%
                
                meditationAudio.addEventListener('loadstart', function() {
                    console.log('Audio loading started');
                });
                
                meditationAudio.addEventListener('canplay', function() {
                    console.log('Audio can start playing');
                });
                
                meditationAudio.addEventListener('ended', function() {
                    // Audio ended naturally, reset music button
                    isMusicPlaying = false;
                    updateMusicButton();
                });
                
                meditationAudio.addEventListener('error', function(e) {
                    console.error('Audio error:', e);
                    console.error('Audio error details:', meditationAudio.error);
                    alert('Unable to load meditation music. Error: ' + (meditationAudio.error ? meditationAudio.error.message : 'Unknown error'));
                });
                
                // Try to load the audio
                meditationAudio.load();
                console.log('Audio element initialized, src:', meditationAudio.src);
            } else {
                console.error('Audio element not found');
            }
        }

        function toggleMeditationMusic() {
            if (!meditationAudio) {
                initializeMeditationAudio();
            }
            
            // This click itself counts as user interaction
            userHasInteracted = true;
            
            if (isMusicPlaying) {
                stopMeditationMusic();
            } else {
                startMeditationMusic();
            }
        }

        function startMeditationMusic() {
            if (meditationAudio) {
                meditationAudio.play().then(() => {
                    isMusicPlaying = true;
                    updateMusicButton();
                    createMusicVisualization();
                }).catch(e => {
                    console.error('Failed to play audio:', e);
                    // Show a more user-friendly error message
                    const errorMsg = e.name === 'NotAllowedError' 
                        ? 'Please allow audio playback in your browser settings or try clicking play again.'
                        : 'Unable to play meditation music. Please check your audio settings.';
                    alert(errorMsg);
                });
            }
        }

        function stopMeditationMusic() {
            if (meditationAudio) {
                meditationAudio.pause();
                meditationAudio.currentTime = 0;
                isMusicPlaying = false;
                updateMusicButton();
            }
        }

        function setMusicVolume(volume) {
            if (meditationAudio) {
                meditationAudio.volume = volume / 100;
            }
            
            // Update volume display
            const volumeDisplay = document.getElementById('volumeDisplay');
            if (volumeDisplay) {
                volumeDisplay.textContent = volume + '%';
            }
            
            // Update volume slider appearance
            const volumeSlider = document.getElementById('musicVolume');
            if (volumeSlider) {
                const percentage = volume;
                volumeSlider.style.background = `linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ${percentage}%, rgba(139, 92, 246, 0.3) ${percentage}%, rgba(139, 92, 246, 0.3) 100%)`;
            }
        }

        function updateMusicButton() {
            const musicButton = document.getElementById('musicToggle');
            const musicIcon = document.getElementById('musicIcon');
            const musicStatus = document.getElementById('musicStatus');
            
            if (musicButton && musicIcon) {
                if (isMusicPlaying) {
                    musicIcon.textContent = '‚è∏Ô∏è';
                    musicButton.innerHTML = `
                        <span id="musicIcon">‚è∏Ô∏è</span>
                        <span data-en="Pause Music" data-mr="‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§•‡§æ‡§Ç‡§¨‡§µ‡§æ">Pause Music</span>
                    `;
                    musicButton.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
                    if (musicStatus) {
                        musicStatus.style.display = 'flex';
                    }
                } else {
                    musicIcon.textContent = '‚ñ∂Ô∏è';
                    musicButton.innerHTML = `
                        <span id="musicIcon">‚ñ∂Ô∏è</span>
                        <span data-en="Play Music" data-mr="‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§ö‡§æ‡§≤‡§µ‡§æ">Play Music</span>
                    `;
                    musicButton.style.background = 'linear-gradient(135deg, #8b5cf6, #7c3aed)';
                    if (musicStatus) {
                        musicStatus.style.display = 'none';
                    }
                }
            }
        }

        // Enhanced music experience functions
        function createMusicVisualization() {
            // Add subtle visual feedback when music is playing
            const musicStatus = document.getElementById('musicStatus');
            if (musicStatus && isMusicPlaying) {
                const waves = musicStatus.querySelector('div');
                if (waves) {
                    waves.style.animation = 'musicWave 1.5s ease-in-out infinite';
                }
            }
        }

        // Track user interaction for autoplay compliance
        let userHasInteracted = false;
        
        function enableAudioAfterInteraction() {
            userHasInteracted = true;
            console.log('User interaction detected - audio can now play');
        }
        


        // Quick test function for console debugging (can be removed in production)
        window.testQuickSubmission = async function() {
            console.log('üß™ Quick test submission...');
            
            // Simulate PHQ-9 responses
            const testResponses = {
                'phq9_1': 1,
                'phq9_2': 2, 
                'phq9_3': 1,
                'phq9_4': 1,
                'phq9_5': 0,
                'phq9_6': 1,
                'phq9_7': 1,
                'phq9_8': 0,
                'phq9_9': 0
            };
            
            const testResult = calculateScreeningScore('phq9', testResponses);
            const testToolData = getToolData('phq9');
            const testDescription = 'Quick test from console - checking if submission works properly.';
            
            await submitScreeningResponse('PHQ-9', testResponses, testDescription, testResult, testToolData);
            console.log('‚úÖ Quick test completed');
        };

        // Initialize audio when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeMeditationAudio();
            setupCharacterCounting();
            
            // Initialize volume slider appearance
            setMusicVolume(50);
            
            // Listen for user interactions to enable audio
            document.addEventListener('click', enableAudioAfterInteraction, { once: true });
            document.addEventListener('keydown', enableAudioAfterInteraction, { once: true });
            document.addEventListener('touchstart', enableAudioAfterInteraction, { once: true });
        });

        // Peer Support functionality
        let currentUserId = null;
        let peerSupportPosts = [];

        // Initialize peer support when section is shown
        function initializePeerSupport() {
            currentUserId = document.getElementById('currentUserEmail').textContent || `anonymous_${Date.now()}`;
            loadPeerSupportPosts();
        }

        function showNewPostForm() {
            document.getElementById('newPostForm').style.display = 'block';
            document.getElementById('newPostContent').focus();
        }

        function cancelPost() {
            document.getElementById('newPostForm').style.display = 'none';
            document.getElementById('newPostContent').value = '';
        }

        async function submitPost() {
            const content = document.getElementById('newPostContent').value.trim();
            if (!content) {
                alert('Please enter some content for your post.');
                return;
            }

            if (content.length > 2000) {
                alert('Post content must be 2000 characters or less.');
                return;
            }

            try {
                // Show loading state
                const submitBtn = document.querySelector('#newPostForm .submit-btn');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<span data-en="Posting..." data-mr="‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•á...">Posting...</span>';
                submitBtn.disabled = true;

                const response = await fetch('/api/peer-support/posts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title: content.substring(0, 100) + (content.length > 100 ? '...' : ''),
                        content: content,
                        authorId: currentUserId,
                        authorEmail: document.getElementById('currentUserEmail').textContent,
                        authorName: document.getElementById('currentUserName').textContent || 'Anonymous Student',
                        language: currentLanguage
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // Clear form and hide
                    cancelPost();
                    
                    // Show success message
                    let message = 'Your post has been shared successfully!';
                    if (result.moderation.needsReview) {
                        message = result.moderation.riskLevel === 'high' 
                            ? 'Your post has been submitted for review due to content concerns. Our team will review it shortly.'
                            : 'Your post has been shared and flagged for moderation review.';
                    }
                    alert(message);
                    
                    // Reload posts to show the new one
                    loadPeerSupportPosts();
                } else {
                    throw new Error(result.message || 'Failed to create post');
                }
            } catch (error) {
                console.error('Error submitting post:', error);
                alert('Failed to submit post. Please try again.');
            } finally {
                // Reset button
                const submitBtn = document.querySelector('#newPostForm .submit-btn');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }

        async function loadPeerSupportPosts(category = 'all', sortBy = 'recent') {
            try {
                const response = await fetch(`/api/peer-support/posts?category=${category}&sortBy=${sortBy}&limit=20`);
                const result = await response.json();

                if (result.success) {
                    peerSupportPosts = result.posts;
                    renderPeerSupportPosts();
                } else {
                    console.error('Failed to load posts:', result.message);
                    // Show static posts as fallback
                    renderStaticPosts();
                }
            } catch (error) {
                console.error('Error loading posts:', error);
                // Show static posts as fallback
                renderStaticPosts();
            }
        }

        function renderPeerSupportPosts() {
            const forumPosts = document.getElementById('forumPosts');
            
            if (peerSupportPosts.length === 0) {
                forumPosts.innerHTML = `
                    <div class="forum-post" style="text-align: center; color: #9ca3af;">
                        <p><span data-en="No posts yet. Be the first to share your story!" data-mr="‡§Ö‡§ú‡•Ç‡§® ‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä ‡§™‡•ã‡§∏‡•ç‡§ü ‡§®‡§æ‡§π‡•Ä. ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§ï‡§π‡§æ‡§£‡•Ä ‡§∏‡§æ‡§Æ‡§æ‡§Ø‡§ø‡§ï ‡§ï‡§∞‡§£‡§æ‡§∞‡•á ‡§™‡§π‡§ø‡§≤‡•á ‡§µ‡•ç‡§π‡§æ!">No posts yet. Be the first to share your story!</span></p>
                    </div>
                `;
                return;
            }

            forumPosts.innerHTML = peerSupportPosts.map(post => `
                <div class="forum-post" data-post-id="${post.id}">
                    <h4>${escapeHtml(post.title)}</h4>
                    <div class="post-meta">
                        <span data-en="${post.authorName} ‚Ä¢ ${post.timeAgo}" data-mr="${post.authorName} ‚Ä¢ ${post.timeAgo}">${post.authorName} ‚Ä¢ ${post.timeAgo}</span>
                        ${post.category !== 'general' ? `<span class="post-category">${post.category}</span>` : ''}
                        ${post.isPinned ? '<span class="post-pinned">üìå Pinned</span>' : ''}
                    </div>
                    <p>${escapeHtml(post.content)}</p>
                    <div class="post-actions">
                        <button class="support-btn ${post.userHasSupported ? 'active' : ''}" onclick="togglePostSupport('${post.id}', this)">
                            üíô <span data-en="Support" data-mr="‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Support</span> (${post.supportCount})
                        </button>
                        <button class="reply-btn" onclick="showPostDetails('${post.id}')">
                            üí¨ <span data-en="Reply" data-mr="‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•ç‡§Ø‡§æ">Reply</span> (${post.replyCount})
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderStaticPosts() {
            // Keep the existing static posts as fallback
            const forumPosts = document.getElementById('forumPosts');
            // The static posts are already in the HTML, so we don't need to do anything
        }

        async function togglePostSupport(postId, button) {
            try {
                const response = await fetch(`/api/peer-support/posts/${postId}/support`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: currentUserId
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // Update button state
                    button.classList.toggle('active', result.supported);
                    button.innerHTML = `üíô <span data-en="Support" data-mr="‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø">Support</span> (${result.supportCount})`;
                    
                    // Update local data
                    const post = peerSupportPosts.find(p => p.id === postId);
                    if (post) {
                        post.supportCount = result.supportCount;
                        post.userHasSupported = result.supported;
                    }
                } else {
                    throw new Error(result.message || 'Failed to toggle support');
                }
            } catch (error) {
                console.error('Error toggling support:', error);
                alert('Failed to update support. Please try again.');
            }
        }

        async function showPostDetails(postId) {
            try {
                const response = await fetch(`/api/peer-support/posts/${postId}?viewerId=${currentUserId}`);
                const result = await response.json();

                if (result.success) {
                    displayPostModal(result.post);
                } else {
                    throw new Error(result.message || 'Failed to load post details');
                }
            } catch (error) {
                console.error('Error loading post details:', error);
                alert('Failed to load post details. Please try again.');
            }
        }

        function displayPostModal(post) {
            // Create modal HTML
            const modalHtml = `
                <div id="postModal" class="modal-overlay" onclick="closePostModal(event)">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h3>${escapeHtml(post.title)}</h3>
                            <button class="modal-close" onclick="closePostModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="post-meta">
                                <span>${post.authorName} ‚Ä¢ ${post.timeAgo}</span>
                                ${post.category !== 'general' ? `<span class="post-category">${post.category}</span>` : ''}
                            </div>
                            <div class="post-content">
                                <p>${escapeHtml(post.content)}</p>
                            </div>
                            <div class="post-actions">
                                <button class="support-btn ${post.userHasSupported ? 'active' : ''}" onclick="togglePostSupport('${post.id}', this)">
                                    üíô Support (${post.supportCount})
                                </button>
                                <span class="post-stats">üëÅÔ∏è ${post.viewCount} views</span>
                            </div>
                            
                            <div class="replies-section">
                                <h4>Replies (${post.replies.length})</h4>
                                ${!post.isLocked ? `
                                    <div class="reply-form">
                                        <textarea id="replyContent" placeholder="Share your thoughts or support..." rows="3"></textarea>
                                        <button onclick="submitReply('${post.id}')" class="submit-btn">Reply</button>
                                    </div>
                                ` : '<p style="color: #9ca3af;">This post is locked and cannot receive new replies.</p>'}
                                
                                <div class="replies-list">
                                    ${post.replies.map(reply => `
                                        <div class="reply" data-reply-id="${reply.id}">
                                            <div class="reply-meta">
                                                <span>${reply.authorName} ‚Ä¢ ${reply.timeAgo}</span>
                                            </div>
                                            <p>${escapeHtml(reply.content)}</p>
                                            <div class="reply-actions">
                                                <button class="support-btn ${reply.userHasSupported ? 'active' : ''}" onclick="toggleReplySupport('${post.id}', '${reply.id}', this)">
                                                    üíô Support (${reply.supportCount})
                                                </button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to page
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        function closePostModal(event) {
            if (event && event.target !== event.currentTarget) return;
            const modal = document.getElementById('postModal');
            if (modal) {
                modal.remove();
            }
        }

        async function submitReply(postId) {
            const content = document.getElementById('replyContent').value.trim();
            if (!content) {
                alert('Please enter a reply.');
                return;
            }

            if (content.length > 1000) {
                alert('Reply must be 1000 characters or less.');
                return;
            }

            try {
                const response = await fetch(`/api/peer-support/posts/${postId}/replies`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        content: content,
                        authorId: currentUserId,
                        authorEmail: document.getElementById('currentUserEmail').textContent,
                        authorName: document.getElementById('currentUserName').textContent || 'Anonymous Student'
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // Close modal and reload post details
                    closePostModal();
                    showPostDetails(postId);
                    
                    // Show success message
                    let message = 'Reply added successfully!';
                    if (result.moderation.needsReview) {
                        message = result.moderation.riskLevel === 'high' 
                            ? 'Reply submitted for review due to content concerns.'
                            : 'Reply added and flagged for moderation review.';
                    }
                    alert(message);
                } else {
                    throw new Error(result.message || 'Failed to add reply');
                }
            } catch (error) {
                console.error('Error submitting reply:', error);
                alert('Failed to submit reply. Please try again.');
            }
        }

        async function toggleReplySupport(postId, replyId, button) {
            try {
                const response = await fetch(`/api/peer-support/posts/${postId}/replies/${replyId}/support`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: currentUserId
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // Update button state
                    button.classList.toggle('active', result.supported);
                    button.innerHTML = `üíô Support (${result.supportCount})`;
                } else {
                    throw new Error(result.message || 'Failed to toggle support');
                }
            } catch (error) {
                console.error('Error toggling reply support:', error);
                alert('Failed to update support. Please try again.');
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize peer support when the section is shown
        function showSection(sectionName) {
            console.log('Showing section:', sectionName);

            // Hide all sections
            document.querySelectorAll('.content-area').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
                
                // Initialize peer support if showing that section
                if (sectionName === 'peer-support') {
                    initializePeerSupport();
                }
            }

            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Find and activate the corresponding nav button
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(sectionName)) {
                    btn.classList.add('active');
                }
            });
        }

        // Error handling
        window.addEventListener('error', function (e) {
            console.error('JavaScript Error:', e.error);
            console.error('File:', e.filename, 'Line:', e.lineno);
        });
        
        // ========== SCREENING TOOLS FUNCTIONALITY ==========
        
        // Screening tools data (frontend version of backend models)
        const ScreeningTools = {
            'PHQ-9': {
                name: 'PHQ-9',
                fullName: 'Patient Health Questionnaire-9',
                timeframe: 'over the last 2 weeks',
                questions: [
                    { id: 'phq9_1', text: 'Little interest or pleasure in doing things', textMr: '‡§ï‡•Ä ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§Æ‡•Ä ‡§∞‡§∏ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Ü‡§®‡§Ç‡§¶' },
                    { id: 'phq9_2', text: 'Feeling down, depressed, or hopeless', textMr: '‡§â‡§¶‡§æ‡§∏, ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø‡§ó‡•ç‡§∞‡§∏‡•ç‡§§ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§®‡§ø‡§∞‡§æ‡§∂ ‡§µ‡§æ‡§ü‡§£‡•á' },
                    { id: 'phq9_3', text: 'Trouble falling or staying asleep, or sleeping too much', textMr: '‡§ù‡•ã‡§™ ‡§Ø‡•á‡§£‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ù‡•ã‡§™‡•á‡§§ ‡§∞‡§æ‡§π‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ö‡§°‡§ö‡§£, ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ù‡•ã‡§™‡§£‡•á' },
                    { id: 'phq9_4', text: 'Feeling tired or having little energy', textMr: '‡§¶‡§Æ ‡§µ‡§æ‡§ü‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡§Æ‡•Ä ‡§â‡§∞‡•ç‡§ú‡§æ ‡§Ö‡§∏‡§£‡•á' },
                    { id: 'phq9_5', text: 'Poor appetite or overeating', textMr: '‡§ï‡§Æ‡•Ä ‡§≠‡•Ç‡§ï ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ñ‡§æ‡§£‡•á' },
                    { id: 'phq9_6', text: 'Feeling bad about yourself - or that you are a failure or have let yourself or your family down', textMr: '‡§∏‡•ç‡§µ‡§§‡§É‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§µ‡§æ‡§à‡§ü ‡§µ‡§æ‡§ü‡§£‡•á - ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Ü‡§™‡§£ ‡§Ö‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä ‡§Ü‡§π‡•ã‡§§ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡•ç‡§µ‡§§‡§É‡§≤‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡•Å‡§ü‡•Å‡§Ç‡§¨‡§æ‡§≤‡§æ ‡§®‡§ø‡§∞‡§æ‡§∂ ‡§ï‡•á‡§≤‡•á ‡§Ü‡§π‡•á' },
                    { id: 'phq9_7', text: 'Trouble concentrating on things, such as reading the newspaper or watching television', textMr: '‡§µ‡§ø‡§∑‡§Ø‡§æ‡§Ç‡§µ‡§∞ ‡§≤‡§ï‡•ç‡§∑ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ö‡§°‡§ö‡§£, ‡§ú‡§∏‡•á ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§®‡§™‡§§‡•ç‡§∞ ‡§µ‡§æ‡§ö‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§¶‡•Ç‡§∞‡§ö‡§ø‡§§‡•ç‡§∞ ‡§™‡§æ‡§π‡§£‡•á' },
                    { id: 'phq9_8', text: 'Moving or speaking so slowly that other people could have noticed. Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual', textMr: '‡§á‡§§‡§ï‡•ç‡§Ø‡§æ ‡§π‡§≥‡•Ç ‡§π‡§≤‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§¨‡•ã‡§≤‡§£‡•á ‡§ï‡•Ä ‡§á‡§§‡§∞ ‡§≤‡•ã‡§ï‡§æ‡§Ç‡§ö‡•ç‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑‡§æ‡§§ ‡§Ü‡§≤‡•á. ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§â‡§≤‡§ü - ‡§á‡§§‡§ï‡•á ‡§Ö‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§¨‡•á‡§ö‡•à‡§® ‡§ï‡•Ä ‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§´‡§ø‡§∞‡§§ ‡§Ü‡§π‡§æ‡§§' },
                    { id: 'phq9_9', text: 'Thoughts that you would be better off dead, or of hurting yourself in some way', textMr: '‡§Ü‡§™‡§£ ‡§Æ‡•á‡§≤‡•ã ‡§§‡§∞ ‡§ö‡§æ‡§Ç‡§ó‡§≤‡•á ‡§π‡•ã‡§à‡§≤, ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞‡•á ‡§∏‡•ç‡§µ‡§§‡§É‡§≤‡§æ ‡§¶‡•Å‡§ñ‡§æ‡§µ‡•ç‡§Ø‡§æ‡§ö‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞', crisisItem: true }
                ],
                responseOptions: [
                    { value: 0, text: 'Not at all', textMr: '‡§Ö‡§ú‡§ø‡§¨‡§æ‡§§ ‡§®‡§æ‡§π‡•Ä' },
                    { value: 1, text: 'Several days', textMr: '‡§Ö‡§®‡•á‡§ï ‡§¶‡§ø‡§µ‡§∏' },
                    { value: 2, text: 'More than half the days', textMr: '‡§Ö‡§∞‡•ç‡§ß‡•ç‡§Ø‡§æ‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§¶‡§ø‡§µ‡§∏' },
                    { value: 3, text: 'Nearly every day', textMr: '‡§ú‡§µ‡§≥‡§ú‡§µ‡§≥ ‡§¶‡§∞‡§∞‡•ã‡§ú' }
                ],
                scoring: {
                    ranges: [
                        { min: 0, max: 4, level: 'minimal', description: 'Minimal depression', descriptionMr: '‡§ï‡§Æ‡§ø‡§®‡§≤ ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø' },
                        { min: 5, max: 9, level: 'mild', description: 'Mild depression', descriptionMr: '‡§∏‡•å‡§Æ‡•ç‡§Ø ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø' },
                        { min: 10, max: 14, level: 'moderate', description: 'Moderate depression', descriptionMr: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø' },
                        { min: 15, max: 19, level: 'moderately_severe', description: 'Moderately severe depression', descriptionMr: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø' },
                        { min: 20, max: 27, level: 'severe', description: 'Severe depression', descriptionMr: '‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø' }
                    ],
                    maxScore: 27,
                    clinicalCutoff: 10
                }
            },
            'GAD-7': {
                name: 'GAD-7',
                fullName: 'Generalized Anxiety Disorder 7-item scale',
                timeframe: 'over the last 2 weeks',
                questions: [
                    { id: 'gad7_1', text: 'Feeling nervous, anxious, or on edge', textMr: '‡§ö‡§ø‡§Ç‡§§‡§æ‡§ó‡•ç‡§∞‡§∏‡•ç‡§§, ‡§Ö‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§§‡§£‡§æ‡§µ‡§æ‡§§ ‡§µ‡§æ‡§ü‡§£‡•á' },
                    { id: 'gad7_2', text: 'Not being able to stop or control worrying', textMr: '‡§ö‡§ø‡§Ç‡§§‡§æ ‡§•‡§æ‡§Ç‡§¨‡§µ‡§£‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§£‡•á ‡§∂‡§ï‡•ç‡§Ø ‡§® ‡§π‡•ã‡§£‡•á' },
                    { id: 'gad7_3', text: 'Worrying too much about different things', textMr: '‡§µ‡•á‡§ó‡§µ‡•á‡§ó‡§≥‡•ç‡§Ø‡§æ ‡§ó‡•ã‡§∑‡•ç‡§ü‡•Ä‡§Ç‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§∞‡§£‡•á' },
                    { id: 'gad7_4', text: 'Trouble relaxing', textMr: '‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ö‡§°‡§ö‡§£' },
                    { id: 'gad7_5', text: 'Being so restless that it is hard to sit still', textMr: '‡§á‡§§‡§ï‡•á ‡§Ö‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§ï‡•Ä ‡§∂‡§æ‡§Ç‡§§ ‡§¨‡§∏‡§£‡•á ‡§ï‡§†‡•Ä‡§£' },
                    { id: 'gad7_6', text: 'Becoming easily annoyed or irritable', textMr: '‡§∏‡§π‡§ú‡§™‡§£‡•á ‡§ö‡§ø‡§°‡§≤‡•á‡§≤‡•á ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ö‡§ø‡§°‡§ö‡§ø‡§°‡§æ‡§π‡§ü ‡§π‡•ã‡§£‡•á' },
                    { id: 'gad7_7', text: 'Feeling afraid, as if something awful might happen', textMr: '‡§ï‡§æ‡§π‡•Ä ‡§≠‡§Ø‡§æ‡§®‡§ï ‡§ò‡§ü‡§®‡§æ ‡§ò‡§°‡•Ç ‡§∂‡§ï‡§§‡•á ‡§Ö‡§∏‡§æ ‡§≠‡•Ä‡§§‡•Ä ‡§µ‡§æ‡§ü‡§£‡•á' }
                ],
                responseOptions: [
                    { value: 0, text: 'Not at all', textMr: '‡§Ö‡§ú‡§ø‡§¨‡§æ‡§§ ‡§®‡§æ‡§π‡•Ä' },
                    { value: 1, text: 'Several days', textMr: '‡§Ö‡§®‡•á‡§ï ‡§¶‡§ø‡§µ‡§∏' },
                    { value: 2, text: 'More than half the days', textMr: '‡§Ö‡§∞‡•ç‡§ß‡•ç‡§Ø‡§æ‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§¶‡§ø‡§µ‡§∏' },
                    { value: 3, text: 'Nearly every day', textMr: '‡§ú‡§µ‡§≥‡§ú‡§µ‡§≥ ‡§¶‡§∞‡§∞‡•ã‡§ú' }
                ],
                scoring: {
                    ranges: [
                        { min: 0, max: 4, level: 'minimal', description: 'Minimal anxiety', descriptionMr: '‡§ï‡§Æ‡§ø‡§®‡§≤ ‡§ö‡§ø‡§Ç‡§§‡§æ' },
                        { min: 5, max: 9, level: 'mild', description: 'Mild anxiety', descriptionMr: '‡§∏‡•å‡§Æ‡•ç‡§Ø ‡§ö‡§ø‡§Ç‡§§‡§æ' },
                        { min: 10, max: 14, level: 'moderate', description: 'Moderate anxiety', descriptionMr: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ö‡§ø‡§Ç‡§§‡§æ' },
                        { min: 15, max: 21, level: 'severe', description: 'Severe anxiety', descriptionMr: '‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§ö‡§ø‡§Ç‡§§‡§æ' }
                    ],
                    maxScore: 21,
                    clinicalCutoff: 10
                }
            },
            'GHQ-12': {
                name: 'GHQ-12',
                fullName: 'General Health Questionnaire-12',
                timeframe: 'over the past few weeks',
                questions: [
                    { id: 'ghq12_1', text: 'Been able to concentrate on whatever you\'re doing', textMr: '‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§ú‡•á ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§ ‡§Ü‡§π‡§æ‡§§ ‡§§‡•ç‡§Ø‡§æ‡§µ‡§∞ ‡§´‡§ï‡•ç‡§§ ‡§≤‡§ï‡•ç‡§∑ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§æ‡§§', positiveItem: true },
                    { id: 'ghq12_2', text: 'Lost much sleep over worry', textMr: '‡§ö‡§ø‡§Ç‡§§‡•á‡§Æ‡•Å‡§≥‡•á ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ù‡•ã‡§™ ‡§ó‡§Æ‡§æ‡§µ‡§≤‡•Ä' },
                    { id: 'ghq12_3', text: 'Felt that you were playing a useful part in things', textMr: '‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§ó‡•ã‡§∑‡•ç‡§ü‡•Ä‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ ‡§¨‡§ú‡§æ‡§µ‡§§ ‡§Ü‡§π‡§æ‡§§ ‡§Ö‡§∏‡•á ‡§µ‡§æ‡§ü‡§≤‡•á', positiveItem: true },
                    { id: 'ghq12_4', text: 'Felt capable of making decisions about things', textMr: '‡§ó‡•ã‡§∑‡•ç‡§ü‡•Ä‡§Ç‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§ò‡•á‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡§Æ‡§∞‡•ç‡§• ‡§µ‡§æ‡§ü‡§≤‡•á', positiveItem: true },
                    { id: 'ghq12_5', text: 'Felt constantly under strain', textMr: '‡§∏‡§æ‡§§‡§§‡•ç‡§Ø ‡§§‡§£‡§æ‡§µ‡§æ‡§ñ‡§æ‡§≤‡•Ä ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§ö‡•á ‡§µ‡§æ‡§ü‡§≤‡•á' },
                    { id: 'ghq12_6', text: 'Felt you couldn\'t overcome your difficulties', textMr: '‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§Ö‡§°‡§ö‡§£‡•Ä‡§Ç‡§µ‡§∞ ‡§Æ‡§æ‡§§ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§£‡§æ‡§∞ ‡§®‡§æ‡§π‡•Ä ‡§Ö‡§∏‡•á ‡§µ‡§æ‡§ü‡§≤‡•á' },
                    { id: 'ghq12_7', text: 'Been able to enjoy your normal day-to-day activities', textMr: '‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§¶‡•à‡§®‡§Ç‡§¶‡§ø‡§® ‡§ï‡§∞‡•ç‡§§‡§µ‡•ç‡§Ø‡§æ‡§Ç‡§ö‡§æ ‡§Ü‡§®‡§Ç‡§¶ ‡§ò‡•á‡§§‡§æ ‡§Ü‡§≤‡§æ', positiveItem: true },
                    { id: 'ghq12_8', text: 'Been able to face up to problems', textMr: '‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§Ç‡§ö‡§æ ‡§∏‡§æ‡§Æ‡§®‡§æ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§æ‡§§', positiveItem: true },
                    { id: 'ghq12_9', text: 'Been feeling unhappy or depressed', textMr: '‡§¶‡•Å‡§ñ‡•Ä ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø‡§ó‡•ç‡§∞‡§∏‡•ç‡§§ ‡§µ‡§æ‡§ü‡§≤‡•á' },
                    { id: 'ghq12_10', text: 'Been losing confidence in yourself', textMr: '‡§∏‡•ç‡§µ‡§§‡§É‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§ó‡§Æ‡§æ‡§µ‡§≤‡§æ' },
                    { id: 'ghq12_11', text: 'Been thinking of yourself as a worthless person', textMr: '‡§∏‡•ç‡§µ‡§§‡§É‡§≤‡§æ ‡§®‡§ø‡§∞‡§∞‡•ç‡§•‡§ï ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡•Ä ‡§Æ‡§æ‡§®‡§≤‡•á' },
                    { id: 'ghq12_12', text: 'Been feeling reasonably happy, all things considered', textMr: '‡§∏‡§∞‡•ç‡§µ‡§ï‡§æ‡§π‡•Ä ‡§µ‡§ø‡§ö‡§æ‡§∞‡§æ‡§§ ‡§ò‡•á‡§§‡§æ, ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§∞‡•Ä‡§§‡•Ä‡§®‡•á ‡§Ü‡§®‡§Ç‡§¶‡•Ä ‡§µ‡§æ‡§ü‡§≤‡•á', positiveItem: true }
                ],
                responseOptions: [
                    { value: 0, text: 'Better than usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ö‡§æ‡§Ç‡§ó‡§≤‡•á' },
                    { value: 1, text: 'Same as usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§∏‡§æ‡§∞‡§ñ‡•á' },
                    { value: 2, text: 'Less than usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ï‡§Æ‡•Ä' },
                    { value: 3, text: 'Much less than usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ï‡§Æ‡•Ä' }
                ],
                alternativeResponseOptions: [
                    { value: 0, text: 'More so than usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§' },
                    { value: 1, text: 'Same as usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§∏‡§æ‡§∞‡§ñ‡•á' },
                    { value: 2, text: 'Less so than usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ï‡§Æ‡•Ä' },
                    { value: 3, text: 'Much less so than usual', textMr: '‡§®‡•á‡§π‡§Æ‡•Ä‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ï‡§Æ‡•Ä' }
                ],
                scoring: {
                    ranges: [
                        { min: 0, max: 11, level: 'normal', description: 'No psychological distress', descriptionMr: '‡§ï‡•ã‡§£‡§§‡§æ‡§π‡•Ä ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§®‡§æ‡§π‡•Ä' },
                        { min: 12, max: 15, level: 'mild', description: 'Mild psychological distress', descriptionMr: '‡§∏‡•å‡§Æ‡•ç‡§Ø ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§æ‡§∏' },
                        { min: 16, max: 20, level: 'moderate', description: 'Moderate psychological distress', descriptionMr: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§æ‡§∏' },
                        { min: 21, max: 36, level: 'severe', description: 'Severe psychological distress', descriptionMr: '‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§æ‡§∏' }
                    ],
                    maxScore: 36,
                    clinicalCutoff: 12
                }
            }
        };
        
        // Screening navigation functions
        function showScreeningHome() {
            document.querySelectorAll('.screening-detail').forEach(detail => {
                detail.style.display = 'none';
            });
            document.getElementById('screeningHome').style.display = 'block';
        }
        
        function showScreeningTool(toolKey) {
            const toolMap = {
                'phq9': 'phq9Screening',
                'gad7': 'gad7Screening', 
                'ghq12': 'ghq12Screening'
            };
            
            // Hide home screen
            document.getElementById('screeningHome').style.display = 'none';
            
            // Hide all other screening details
            document.querySelectorAll('.screening-detail').forEach(detail => {
                detail.style.display = 'none';
            });
            
            // Show selected screening tool
            const targetElement = document.getElementById(toolMap[toolKey]);
            if (targetElement) {
                targetElement.style.display = 'block';
                
                // Generate questions for the tool
                generateScreeningQuestions(toolKey);
            }
        }
        
        // Generate questions for each screening tool
        function generateScreeningQuestions(toolKey) {
            const toolData = getToolData(toolKey);
            if (!toolData) return;
            
            const questionsContainer = document.getElementById(`${toolKey}Questions`);
            if (!questionsContainer) return;
            
            let questionsHTML = '';
            
            toolData.questions.forEach((question, index) => {
                const questionNumber = index + 1;
                const responseOptions = getResponseOptions(toolData, question);
                
                questionsHTML += `
                    <div class="question-group" style="margin-bottom: 25px; padding: 20px; background: rgba(30, 41, 59, 0.3); border-radius: 8px; ${question.crisisItem ? 'border: 2px solid rgba(239, 68, 68, 0.5);' : ''}">
                        ${question.crisisItem ? '<div style="color: #ef4444; font-weight: bold; margin-bottom: 10px;">‚ö†Ô∏è Important Question</div>' : ''}
                        <h4 style="color: #f3f4f6; margin-bottom: 15px;">
                            ${questionNumber}. <span data-en="${question.text}" data-mr="${question.textMr || question.text}">${currentLanguage === 'mr' && question.textMr ? question.textMr : question.text}</span>
                        </h4>
                        <div class="response-options" style="display: grid; gap: 10px;">
                            ${responseOptions.map(option => `
                                <label style="display: flex; align-items: center; padding: 10px; background: rgba(15, 23, 42, 0.6); border-radius: 5px; cursor: pointer; transition: background-color 0.2s;">
                                    <input type="radio" name="${question.id}" value="${option.value}" style="margin-right: 10px;">
                                    <span data-en="${option.text}" data-mr="${option.textMr || option.text}">${currentLanguage === 'mr' && option.textMr ? option.textMr : option.text}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            questionsContainer.innerHTML = questionsHTML;
        }
        
        // Get appropriate response options for a question
        function getResponseOptions(toolData, question) {
            if (toolData.name === 'GHQ-12' && question.positiveItem) {
                return toolData.alternativeResponseOptions || toolData.responseOptions;
            }
            return toolData.responseOptions;
        }
        
        // Get tool data by key
        function getToolData(toolKey) {
            const toolMap = {
                'phq9': 'PHQ-9',
                'gad7': 'GAD-7',
                'ghq12': 'GHQ-12'
            };
            return ScreeningTools[toolMap[toolKey]];
        }
        
        // Submit screening response to backend
        async function submitScreeningResponse(toolName, responses, userDescription, result, toolData) {
            console.log('üì§ Submitting', toolName, 'screening response...');
            
            try {
                // Get user information
                const userId = document.getElementById('currentUserName')?.textContent || 'anonymous_user';
                const userEmail = document.getElementById('currentUserEmail')?.textContent || 'anonymous@example.com';
                const sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                
                // Prepare detailed responses with question text
                // Convert responses object to array in correct order
                const responsesArray = toolData.questions.map(question => responses[question.id] || 0);
                
                const detailedResponses = toolData.questions.map((question, index) => ({
                    questionId: question.id,
                    questionText: question.text,
                    response: responsesArray[index],
                    category: question.category || 'general'
                }));
                
                // Prepare crisis indicators
                const crisisIndicators = {
                    hasCrisisAlerts: result.crisisAlerts && result.crisisAlerts.length > 0,
                    crisisAlerts: result.crisisAlerts || [],
                    requiresImmediateAttention: result.crisisAlerts && result.crisisAlerts.some(alert => alert.severity === 'critical')
                };
                
                // Prepare results object
                const resultsData = {
                    totalScore: result.totalScore,
                    maxScore: result.maxScore,
                    percentage: Math.round((result.totalScore / result.maxScore) * 100),
                    severityLevel: result.level,
                    description: result.description,
                    isAboveThreshold: result.isAboveThreshold,
                    clinicalThreshold: result.clinicalThreshold || 10
                };
                
                const payload = {
                    userId,
                    userEmail,
                    sessionId,
                    toolName,
                    responses: detailedResponses,
                    userDescription,
                    results: resultsData,
                    crisisIndicators,
                    recommendations: result.recommendations || [],
                    language: currentLanguage
                };
                
                const response = await fetch('/api/screening-responses/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    console.log('‚úÖ Screening response submitted successfully:', data.responseId);
                    
                    // Show success message to user
                    alert('‚úÖ Your screening response has been saved successfully!' + 
                          (data.responseId ? ` (ID: ${data.responseId.substring(0, 8)}...)` : '') +
                          '\n\nüí° Tip: Counselors can now view your response in the admin dashboard.');
                    
                    // Show additional message if high risk
                    if (data.requiresFollowUp) {
                        setTimeout(() => {
                            alert(currentLanguage === 'mr' 
                                ? '‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡§™‡§£‡•á ‡§ú‡§§‡§® ‡§ï‡•á‡§≤‡§æ ‡§ó‡•á‡§≤‡§æ ‡§Ü‡§π‡•á. ‡§Ü‡§Æ‡§ö‡•á ‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§ï ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ‡§∂‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡•Ç ‡§∂‡§ï‡§§‡§æ‡§§.'
                                : 'üö® Your response indicates you may benefit from additional support. Our counselors may reach out to you for follow-up care.'
                            );
                        }, 2000);
                    }
                } else {
                    console.error('‚ùå Failed to submit screening response:', data.error);
                    alert('‚ö†Ô∏è There was an issue saving your response, but your results are still available above.');
                }
                
            } catch (error) {
                console.error('‚ùå Error submitting screening response:', error);
                alert('‚ö†Ô∏è Unable to save response to database, but your results are displayed above.');
            }
        }

        // Calculate PHQ-9 Score
        function calculatePHQ9Score() {
            const responses = getFormResponses('phq9Form');
            const toolData = getToolData('phq9');
            
            if (!validateAllQuestionsAnswered('phq9Form', toolData)) return;
            
            const result = calculateScreeningScore('phq9', responses);
            const userDescription = document.getElementById('phq9UserDescription').value.trim();
            result.userDescription = userDescription;
            
            // Submit to backend
            submitScreeningResponse('PHQ-9', responses, userDescription, result, toolData);
            
            displayScreeningResults('phq9Results', result, toolData);
        }
        
        // Calculate GAD-7 Score
        function calculateGAD7Score() {
            const responses = getFormResponses('gad7Form');
            const toolData = getToolData('gad7');
            
            if (!validateAllQuestionsAnswered('gad7Form', toolData)) return;
            
            const result = calculateScreeningScore('gad7', responses);
            const userDescription = document.getElementById('gad7UserDescription').value.trim();
            result.userDescription = userDescription;
            
            // Submit to backend
            submitScreeningResponse('GAD-7', responses, userDescription, result, toolData);
            
            displayScreeningResults('gad7Results', result, toolData);
        }
        
        // Calculate GHQ-12 Score
        function calculateGHQ12Score() {
            const responses = getFormResponses('ghq12Form');
            const toolData = getToolData('ghq12');
            
            if (!validateAllQuestionsAnswered('ghq12Form', toolData)) return;
            
            const result = calculateScreeningScore('ghq12', responses);
            const userDescription = document.getElementById('ghq12UserDescription').value.trim();
            result.userDescription = userDescription;
            
            console.log('üìä GHQ-12 calculation result:', result);
            
            // Submit to backend
            console.log('üì§ Submitting GHQ-12 to backend...');
            submitScreeningResponse('GHQ-12', responses, userDescription, result, toolData);
            
            displayScreeningResults('ghq12Results', result, toolData);
        }

        // Character counting for description fields
        function setupCharacterCounting() {
            const textareas = [
                { id: 'phq9UserDescription', countId: 'phq9CharCount' },
                { id: 'gad7UserDescription', countId: 'gad7CharCount' },
                { id: 'ghq12UserDescription', countId: 'ghq12CharCount' }
            ];
            
            textareas.forEach(({ id, countId }) => {
                const textarea = document.getElementById(id);
                const counter = document.getElementById(countId);
                
                if (textarea && counter) {
                    textarea.addEventListener('input', function() {
                        const length = this.value.length;
                        counter.textContent = `${length}/1000`;
                        
                        // Change color when approaching limit
                        if (length > 900) {
                            counter.style.color = '#ef4444';
                        } else if (length > 800) {
                            counter.style.color = '#f59e0b';
                        } else {
                            counter.style.color = '#9ca3af';
                        }
                    });
                }
            });
        }
        
        // Get form responses
        function getFormResponses(formId) {
            const form = document.getElementById(formId);
            const responses = {};
            
            form.querySelectorAll('input[type="radio"]:checked').forEach(input => {
                responses[input.name] = parseInt(input.value);
            });
            
            return responses;
        }
        
        // Validate that all questions are answered
        function validateAllQuestionsAnswered(formId, toolData) {
            const responses = getFormResponses(formId);
            const allQuestionIds = toolData.questions.map(q => q.id);
            
            for (let questionId of allQuestionIds) {
                if (responses[questionId] === undefined) {
                    const questionNumber = allQuestionIds.indexOf(questionId) + 1;
                    alert(`Please answer question ${questionNumber} before calculating results.`);
                    return false;
                }
            }
            return true;
        }
        
        // Calculate screening score
        function calculateScreeningScore(toolKey, responses) {
            const toolData = getToolData(toolKey);
            let totalScore = 0;
            const detailedScoring = [];
            let crisisAlerts = [];
            
            toolData.questions.forEach((question, index) => {
                const responseValue = responses[question.id] || 0;
                let adjustedValue = responseValue;
                
                // Handle GHQ-12 scoring (no adjustment for standard scoring)
                // For simplicity, we'll use standard scoring here
                
                totalScore += adjustedValue;
                detailedScoring.push({
                    questionId: question.id,
                    questionNumber: index + 1,
                    responseValue: responseValue,
                    adjustedValue: adjustedValue,
                    questionText: currentLanguage === 'mr' && question.textMr ? question.textMr : question.text
                });
                
                // Check for crisis indicators
                if (question.crisisItem && responseValue > 0) {
                    crisisAlerts.push({
                        type: 'suicidal_ideation',
                        severity: 'critical',
                        message: currentLanguage === 'mr' 
                            ? '‡§Ü‡§§‡•ç‡§Æ‡§π‡§§‡•ç‡§Ø‡•á‡§ö‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§Ü‡§¢‡§≥‡§≤‡•á ‡§Ü‡§π‡•á‡§§. ‡§§‡§§‡•ç‡§ï‡§æ‡§≥ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡§¶‡§§ ‡§ò‡•ç‡§Ø‡§æ.' 
                            : 'Suicidal thoughts detected. Please seek immediate professional help.',
                        questionId: question.id
                    });
                }
            });
            
            // Find severity level
            const range = toolData.scoring.ranges.find(r => totalScore >= r.min && totalScore <= r.max);
            const isAboveThreshold = totalScore >= toolData.scoring.clinicalCutoff;
            
            // Check for crisis based on total score
            if (toolKey === 'phq9' && totalScore >= 20) {
                crisisAlerts.push({
                    type: 'severeDepression',
                    severity: 'high',
                    message: currentLanguage === 'mr'
                        ? '‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§®‡•à‡§∞‡§æ‡§∂‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§Ü‡§¢‡§≥‡§≤‡•Ä ‡§Ü‡§π‡•á‡§§. ‡§§‡•Å‡§∞‡§§ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.'
                        : 'Severe depression symptoms detected. Urgent professional evaluation recommended.'
                });
            } else if (toolKey === 'gad7' && totalScore >= 15) {
                crisisAlerts.push({
                    type: 'severeAnxiety', 
                    severity: 'high',
                    message: currentLanguage === 'mr'
                        ? '‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§ö‡§ø‡§Ç‡§§‡•á‡§ö‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§Ü‡§¢‡§≥‡§≤‡•Ä ‡§Ü‡§π‡•á‡§§. ‡§§‡•Å‡§∞‡§§ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.'
                        : 'Severe anxiety symptoms detected. Urgent professional evaluation recommended.'
                });
            } else if (toolKey === 'ghq12' && totalScore >= 21) {
                crisisAlerts.push({
                    type: 'severeDistress',
                    severity: 'high', 
                    message: currentLanguage === 'mr'
                        ? '‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§Ü‡§¢‡§≥‡§≤‡§æ ‡§Ü‡§π‡•á. ‡§§‡•Å‡§∞‡§§ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.'
                        : 'Severe psychological distress detected. Urgent professional evaluation recommended.'
                });
            }
            
            return {
                toolName: toolData.fullName,
                totalScore,
                maxScore: toolData.scoring.maxScore,
                level: range ? range.level : 'unknown',
                description: range ? (currentLanguage === 'mr' && range.descriptionMr ? range.descriptionMr : range.description) : 'Score out of range',
                isAboveThreshold,
                clinicalCutoff: toolData.scoring.clinicalCutoff,
                crisisAlerts,
                requiresImmediateAttention: crisisAlerts.length > 0,
                detailedScoring,
                recommendations: generateRecommendations(toolKey, range ? range.level : 'unknown', totalScore, crisisAlerts.length > 0)
            };
        }
        
        // Generate recommendations based on score
        function generateRecommendations(toolKey, level, score, hasCrisis) {
            let recommendations = [];
            
            if (hasCrisis) {
                recommendations = currentLanguage === 'mr' ? [
                    '‡§§‡§§‡•ç‡§ï‡§æ‡§≥ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï',
                    '‡§∏‡§Ç‡§ï‡§ü ‡§π‡§∏‡•ç‡§§‡§ï‡•ç‡§∑‡•á‡§™ ‡§∏‡•á‡§µ‡§æ‡§Ç‡§∂‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡§æ',
                    '‡§§‡•Å‡§∞‡§§ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®‡§æ‡§ö‡•Ä ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§ï‡§∞‡§æ'
                ] : [
                    'Immediate safety assessment required',
                    'Contact crisis intervention services', 
                    'Arrange urgent professional evaluation'
                ];
            } else if (level === 'severe' || level === 'moderately_severe') {
                recommendations = currentLanguage === 'mr' ? [
                    '‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§Æ‡§ø‡§≥‡§µ‡§æ',
                    '‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡•ç‡§Ø‡§æ‡§∂‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡§æ',
                    '‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡§Ç‡§ï‡§ü ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡§æ'
                ] : [
                    'Seek professional mental health evaluation',
                    'Contact healthcare provider',
                    'Consider crisis support if needed'
                ];
            } else if (level === 'moderate') {
                recommendations = currentLanguage === 'mr' ? [
                    '‡§∏‡§Æ‡•Å‡§™‡§¶‡•á‡§∂‡§® ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§•‡•á‡§∞‡§™‡•Ä‡§ö‡§æ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡§æ',
                    '‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡•ç‡§Ø‡§æ‡§∏‡•ã‡§¨‡§§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ‡§æ‡§Ç‡§µ‡§∞ ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§ï‡§∞‡§æ',
                    '‡§∏‡•ç‡§µ-‡§ï‡§æ‡§≥‡§ú‡•Ä ‡§∞‡§£‡§®‡•Ä‡§§‡•Ä ‡§Ö‡§Ç‡§Æ‡§≤‡§æ‡§§ ‡§Ü‡§£‡§æ'
                ] : [
                    'Consider counseling or therapy',
                    'Discuss results with healthcare provider',
                    'Implement self-care strategies'
                ];
            } else {
                recommendations = currentLanguage === 'mr' ? [
                    '‡§∏‡•ç‡§µ-‡§ï‡§æ‡§≥‡§ú‡•Ä ‡§™‡§¶‡•ç‡§ß‡§§‡•Ä‡§Ç‡§®‡§æ ‡§ö‡§æ‡§≤‡•Ç ‡§†‡•á‡§µ‡§æ',
                    '‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§≤‡§ï‡•ç‡§∑‡§æ‡§§ ‡§†‡•á‡§µ‡§æ',
                    '‡§≤‡§ï‡•ç‡§∑‡§£‡•á ‡§µ‡§æ‡§¢‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡§¶‡§§ ‡§Æ‡§æ‡§ó‡§æ'
                ] : [
                    'Continue self-care practices',
                    'Monitor symptoms',
                    'Seek support if symptoms worsen'
                ];
            }
            
            return recommendations;
        }
        
        // Display screening results
        function displayScreeningResults(resultsDivId, result, toolData) {
            const resultsDiv = document.getElementById(resultsDivId);
            if (!resultsDiv) return;
            
            const severityColor = getSeverityColor(result.level);
            const crisisHTML = result.crisisAlerts.length > 0 ? `
                <div class="crisis-alert" style="background: rgba(239, 68, 68, 0.1); border: 2px solid rgba(239, 68, 68, 0.5); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h4 style="color: #ef4444; margin-bottom: 15px;">üö® <span data-en="Crisis Alert" data-mr="‡§∏‡§Ç‡§ï‡§ü ‡§∏‡•Ç‡§ö‡§®‡§æ">Crisis Alert</span></h4>
                    ${result.crisisAlerts.map(alert => `
                        <p style="color: #ef4444; font-weight: bold;">${alert.message}</p>
                    `).join('')}
                    <div style="margin-top: 15px;">
                        <h5 style="color: #ef4444;"><span data-en="Emergency Resources:" data-mr="‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•á:">Emergency Resources:</span></h5>
                        <ul style="color: #ef4444;">
                            <li><strong><span data-en="National Suicide Prevention Lifeline:" data-mr="‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ü‡§§‡•ç‡§Æ‡§π‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§Ç‡§ß ‡§≤‡§æ‡§á‡§´‡§≤‡§æ‡§á‡§®:">National Suicide Prevention Lifeline:</span></strong> <a href="tel:988" style="color: #ef4444;">988</a></li>
                            <li><strong><span data-en="Crisis Text Line:" data-mr="‡§∏‡§Ç‡§ï‡§ü ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§≤‡§æ‡§á‡§®:">Crisis Text Line:</span></strong> <span data-en="Text HOME to 741741" data-mr="741741 ‡§µ‡§∞ HOME ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§™‡§æ‡§†‡§µ‡§æ">Text HOME to 741741</span></li>
                            <li><strong><span data-en="Emergency Services:" data-mr="‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•á‡§µ‡§æ:">Emergency Services:</span></strong> <a href="tel:911" style="color: #ef4444;">911</a></li>
                        </ul>
                    </div>
                </div>
            ` : '';
            
            resultsDiv.innerHTML = `
                <div class="screening-result-card" style="background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(139, 92, 246, 0.3); padding: 30px; border-radius: 10px;">
                    <h3 style="color: #f3f4f6; margin-bottom: 20px;">üìã <span data-en="Screening Results" data-mr="‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ">Screening Results</span></h3>
                    
                    ${crisisHTML}
                    
                    <div class="score-summary" style="margin-bottom: 25px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 18px; color: #f3f4f6;"><span data-en="Your Score:" data-mr="‡§§‡•Å‡§Æ‡§ö‡§æ ‡§ó‡•Å‡§£:">Your Score:</span></span>
                            <span style="font-size: 24px; font-weight: bold; color: ${severityColor};">${result.totalScore}/${result.maxScore}</span>
                        </div>
                        <div class="score-bar" style="background: rgba(75, 85, 99, 0.5); height: 20px; border-radius: 10px; overflow: hidden;">
                            <div style="background: ${severityColor}; height: 100%; width: ${(result.totalScore / result.maxScore) * 100}%; border-radius: 10px; transition: width 0.3s ease;"></div>
                        </div>
                    </div>
                    
                    <div class="severity-level" style="margin-bottom: 25px;">
                        <h4 style="color: #f3f4f6; margin-bottom: 10px;"><span data-en="Severity Level:" data-mr="‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ ‡§™‡§æ‡§§‡§≥‡•Ä:">Severity Level:</span></h4>
                        <div style="background: rgba(${severityColor.replace('#', '').match(/.{2}/g).map(hex => parseInt(hex, 16)).join(', ')}, 0.2); border: 1px solid ${severityColor}; padding: 15px; border-radius: 8px;">
                            <span style="color: ${severityColor}; font-weight: bold; text-transform: capitalize;">${result.description}</span>
                        </div>
                        ${result.isAboveThreshold ? `
                            <div style="margin-top: 10px; color: #f59e0b;">‚ö†Ô∏è <span data-en="Above clinical threshold - consider professional consultation" data-mr="‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§Æ‡§∞‡•ç‡§Ø‡§æ‡§¶‡•á‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§µ‡§∞‡§ö‡§æ - ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§∏‡§≤‡•ç‡§≤‡§Æ‡§∏‡§≤‡§§ ‡§µ‡§ø‡§ö‡§æ‡§∞‡§æ‡§§ ‡§ò‡•ç‡§Ø‡§æ">Above clinical threshold - consider professional consultation</span></div>
                        ` : ''}
                    </div>
                    
                    <div class="recommendations" style="margin-bottom: 25px;">
                        <h4 style="color: #f3f4f6; margin-bottom: 15px;">üí° <span data-en="Recommendations:" data-mr="‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä:">Recommendations:</span></h4>
                        <ul style="color: #d1d5db; line-height: 1.6;">
                            ${result.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>
                    
                    ${result.userDescription ? `
                        <div class="user-description-results" style="margin-bottom: 25px;">
                            <h4 style="color: #f3f4f6; margin-bottom: 15px;">üí≠ <span data-en="Your Additional Notes:" data-mr="‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ü‡§ø‡§™‡•ç‡§™‡§£‡•ç‡§Ø‡§æ:">Your Additional Notes:</span></h4>
                            <div style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); padding: 15px; border-radius: 8px; color: #d1d5db; line-height: 1.6; white-space: pre-wrap;">
                                ${result.userDescription}
                            </div>
                            <p style="color: #9ca3af; font-size: 12px; margin-top: 10px;">
                                <span data-en="This information has been included in your assessment for more personalized recommendations." 
                                      data-mr="‡§Ö‡§ß‡§ø‡§ï ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï‡•É‡§§ ‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§π‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®‡§æ‡§§ ‡§∏‡§Æ‡§æ‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡•á‡§≤‡•Ä ‡§ó‡•á‡§≤‡•Ä ‡§Ü‡§π‡•á.">
                                    This information has been included in your assessment for more personalized recommendations.
                                </span>
                            </p>
                        </div>
                    ` : ''}
                    
                    <div class="disclaimer" style="background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); padding: 15px; border-radius: 8px; color: #06b6d4; font-size: 14px;">
                        <p><strong><span data-en="Important:" data-mr="‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ö‡•á:">Important:</span></strong> <span data-en="This screening is for informational purposes only and does not constitute a clinical diagnosis. Please discuss these results with a qualified healthcare provider." data-mr="‡§π‡•Ä ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§ï‡•á‡§µ‡§≥ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§π‡•á‡§§‡•Ç‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§π‡•á ‡§Ü‡§£‡§ø ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§®‡§ø‡§¶‡§æ‡§® ‡§®‡§æ‡§π‡•Ä. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ‡§æ‡§Ç‡§µ‡§∞ ‡§™‡§æ‡§§‡•ç‡§∞ ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡•ç‡§Ø‡§æ‡§∏‡•ã‡§¨‡§§ ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§ï‡§∞‡§æ.">This screening is for informational purposes only and does not constitute a clinical diagnosis. Please discuss these results with a qualified healthcare provider.</span></p>
                    </div>
                    
                    <div class="actions" style="text-align: center; margin-top: 25px;">
                        <button onclick="printResults('${resultsDivId}')" style="background: #6366f1; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; margin-right: 10px;">
                            üñ®Ô∏è <span data-en="Print Results" data-mr="‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§õ‡§æ‡§™‡§æ">Print Results</span>
                        </button>
                        <button onclick="shareResults('${toolData.name}', ${result.totalScore}, '${result.level}')" style="background: #10b981; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer;">
                            üì§ <span data-en="Share Results" data-mr="‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∂‡•á‡§Ö‡§∞ ‡§ï‡§∞‡§æ">Share Results</span>
                        </button>
                    </div>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
            
            // Update multilingual content
            if (currentLanguage === 'mr') {
                switchLanguage('mr');
            }
        }
        
        // Get severity color
        function getSeverityColor(level) {
            const colors = {
                'minimal': '#10b981',
                'normal': '#10b981', 
                'mild': '#f59e0b',
                'moderate': '#f97316',
                'moderately_severe': '#ef4444',
                'severe': '#dc2626'
            };
            return colors[level] || '#6b7280';
        }
        
        // Reset screening form
        function resetScreening(toolKey) {
            const form = document.getElementById(`${toolKey}Form`);
            const results = document.getElementById(`${toolKey}Results`);
            const userDescription = document.getElementById(`${toolKey}UserDescription`);
            const charCount = document.getElementById(`${toolKey}CharCount`);
            
            if (form) {
                form.reset();
            }
            if (results) {
                results.style.display = 'none';
            }
            if (userDescription) {
                userDescription.value = '';
            }
            if (charCount) {
                charCount.textContent = '0/1000';
                charCount.style.color = '#9ca3af';
            }
        }
        
        // Print results
        function printResults(resultsDivId) {
            const resultsDiv = document.getElementById(resultsDivId);
            if (!resultsDiv) return;
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Mental Health Screening Results</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; color: #333; }
                            .crisis-alert { background: #fee; border: 2px solid #f00; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
                            .score-bar { background: #eee; height: 20px; border-radius: 10px; overflow: hidden; }
                        </style>
                    </head>
                    <body>
                        <h1>AarogyaTech - Mental Health Screening Results</h1>
                        <div style="color: #333;">${resultsDiv.innerHTML.replace(/style="[^"]*"/g, '')}</div>
                        <hr>
                        <p><small>Generated on ${new Date().toLocaleString()}</small></p>
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }
        
        // Share results
        function shareResults(toolName, score, level) {
            const message = `I completed a ${toolName} screening on AarogyaTech. Results are confidential and for personal reference only.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Mental Health Screening - AarogyaTech',
                    text: message
                }).catch(err => console.log('Error sharing:', err));
            } else {
                // Fallback - copy to clipboard
                navigator.clipboard.writeText(message).then(() => {
                    alert('Results summary copied to clipboard!');
                }).catch(err => {
                    console.log('Failed to copy to clipboard:', err);
                    alert('Sharing not supported on this device.');
                });
            }
        }

        // Voice functionality
        let currentVoiceMode = 'text';
        let voiceManager = null;
        let isRecording = false;
        let currentAudio = null;
        
        // Initialize VoiceInteractionManager
        async function initializeVoiceManager() {
            try {
                // First check if voice services are available
                const serviceStatus = await checkVoiceServiceAvailability();
                
                if (serviceStatus.voiceConversationAvailable) {
                    voiceManager = new VoiceInteractionManager({
                        apiBaseUrl: '/api',
                        visualizerEnabled: true,
                        animationsEnabled: true,
                        autoPlayResponse: true,
                        onTranscription: (text) => {
                            console.log('Voice transcription:', text);
                            addMessageToChat('user', text);
                        },
                        onResponse: (text) => {
                            console.log('Voice response:', text);
                            addMessageToChat('bot', text);
                        },
                        onError: (message, error) => {
                            console.error('Voice error:', message, error);
                            showVoiceError(message);
                        }
                    });
                    console.log('Advanced voice manager initialized');
                } else {
                    console.log('Advanced voice features unavailable - using browser-based fallback');
                    updateAdvancedVoiceStatus(serviceStatus);
                }
            } catch (error) {
                console.error('Failed to initialize voice manager:', error);
                showVoiceError('Advanced voice features are not available');
            }
        }
        
        // Check voice service availability
        async function checkVoiceServiceAvailability() {
            try {
                const response = await fetch('/api/voice-conversation/status');
                const data = await response.json();
                return {
                    voiceConversationAvailable: data.isAvailable,
                    speechToTextAvailable: data.services?.speechToText?.available || false,
                    textToSpeechAvailable: data.services?.textToSpeech?.available || false,
                    conversationalAIAvailable: data.services?.conversationalAI?.available || false,
                    details: data
                };
            } catch (error) {
                console.error('Failed to check voice service status:', error);
                return {
                    voiceConversationAvailable: false,
                    speechToTextAvailable: false,
                    textToSpeechAvailable: false,
                    conversationalAIAvailable: false,
                    error: error.message
                };
            }
        }
        
        // Update advanced voice area status
        function updateAdvancedVoiceStatus(serviceStatus) {
            const toggleBtn = document.getElementById('toggleVoiceArea');
            if (toggleBtn) {
                if (!serviceStatus.voiceConversationAvailable) {
                    toggleBtn.innerHTML = `
                        üîß <span data-en="Advanced Voice Unavailable (Configuration Required)" 
                               data-mr="‡§™‡•ç‡§∞‡§ó‡§§ ‡§Ü‡§µ‡§æ‡§ú ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß (‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï)">Advanced Voice Unavailable (Configuration Required)</span>
                    `;
                    toggleBtn.disabled = true;
                    toggleBtn.title = 'Text-to-Speech API configuration required for advanced voice features';
                    toggleBtn.style.opacity = '0.6';
                    toggleBtn.style.cursor = 'not-allowed';
                }
            }
        }

        // Voice mode management
        function setVoiceMode(mode) {
            console.log('Setting voice mode to:', mode);
            currentVoiceMode = mode;

            // Update UI buttons
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');

            // Show/hide voice controls based on mode
            const voiceBtn = document.getElementById('voiceBtn');
            const voiceToTextBtn = document.getElementById('voiceToTextBtn');
            const stopVoiceBtn = document.getElementById('stopVoiceBtn');
            const voiceArea = document.getElementById('voiceInteractionArea');
            const toggleBtn = document.getElementById('toggleVoiceArea');

            // Hide all voice controls first
            voiceBtn.style.display = 'none';
            voiceToTextBtn.style.display = 'none';
            stopVoiceBtn.style.display = 'none';

            if (mode === 'voice-to-text') {
                voiceBtn.style.display = 'flex';
                voiceBtn.onclick = startVoiceRecording;
                voiceBtn.title = 'Click to record voice message';
                // Hide advanced voice area for simple voice-to-text
                if (voiceArea) voiceArea.style.display = 'none';
            } else if (mode === 'voice-to-voice') {
                // Show the toggle button for advanced voice features
                if (toggleBtn) {
                    toggleBtn.style.display = 'block';
                }
                voiceBtn.style.display = 'flex';
                voiceBtn.onclick = startVoiceRecording;
                voiceBtn.title = 'Click to start voice conversation or use Advanced Voice Mode below';
            } else {
                // Text mode - hide advanced voice area
                if (voiceArea) voiceArea.style.display = 'none';
                if (toggleBtn) toggleBtn.style.display = 'none';
            }

            updateModeInstructions(mode);
        }

        function updateModeInstructions(mode) {
            const instructions = {
                'text': 'Type your message and click Send',
                'voice-to-text': 'Click the microphone to record your voice, or type your message',
                'voice-to-voice': 'Click the microphone for voice conversation - I\'ll respond with voice too'
            };

            // You can add instruction display here if needed
            console.log('Mode instruction:', instructions[mode]);
        }

        // Voice recording functions
        async function startVoiceRecording() {
            if (isRecording) return;

            try {
                console.log('Starting voice recording...');
                
                if (voiceManager) {
                    // Use the advanced VoiceInteractionManager
                    await voiceManager.startRecording();
                    isRecording = true;
                } else {
                    // Fallback to Web Speech API for direct speech recognition (more reliable)
                    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                        await startWebSpeechRecognition();
                        return;
                    }
                    
                    throw new Error('No voice recognition available');
                }

                // Update UI
                showVoiceIndicator();
                document.getElementById('voiceBtn').style.display = 'none';
                document.getElementById('stopVoiceBtn').style.display = 'flex';

            } catch (error) {
                console.error('Failed to start recording:', error);
                showVoiceError('Microphone access denied. Please allow microphone access to use voice features.');
            }
        }

        // Web Speech Recognition (direct approach)
        async function startWebSpeechRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                throw new Error('Speech recognition not supported');
            }

            const recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = currentLanguage === 'mr' ? 'mr-IN' : 'en-US';

            // Update UI
            isRecording = true;
            showVoiceIndicator();
            document.getElementById('voiceBtn').style.display = 'none';
            document.getElementById('stopVoiceBtn').style.display = 'flex';

            recognition.onresult = async (event) => {
                const transcript = event.results[0][0].transcript;
                console.log('Speech recognition result:', transcript);
                
                // Process the transcription
                if (transcript && transcript.trim()) {
                    // Add user message to chat
                    addMessageToChat('user', transcript);

                    // Show processing indicator
                    showProcessingIndicator();

                    try {
                        // Get AI response
                        const response = await getAIResponse(transcript);

                        if (response) {
                            // Add bot response to chat
                            addMessageToChat('bot', response);

                            // If voice-to-voice mode, also play the response
                            if (currentVoiceMode === 'voice-to-voice') {
                                await textToSpeech(response);
                            }
                        }
                    } catch (error) {
                        console.error('Error getting AI response:', error);
                        addMessageToChat('bot', "I'm sorry, I'm having trouble responding right now. Please try again.");
                    } finally {
                        hideProcessingIndicator();
                    }
                }

                // Reset UI
                isRecording = false;
                hideVoiceIndicator();
                document.getElementById('voiceBtn').style.display = 'flex';
                document.getElementById('stopVoiceBtn').style.display = 'none';
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                showVoiceError(`Speech recognition error: ${event.error}`);
                
                // Reset UI
                isRecording = false;
                hideVoiceIndicator();
                document.getElementById('voiceBtn').style.display = 'flex';
                document.getElementById('stopVoiceBtn').style.display = 'none';
            };

            recognition.onend = () => {
                console.log('Speech recognition ended');
                
                // Reset UI if not already reset
                if (isRecording) {
                    isRecording = false;
                    hideVoiceIndicator();
                    document.getElementById('voiceBtn').style.display = 'flex';
                    document.getElementById('stopVoiceBtn').style.display = 'none';
                }
            };

            recognition.start();
        }

        function stopVoiceRecording() {
            if (!isRecording) return;

            console.log('Stopping voice recording...');
            
            if (voiceManager) {
                // Use the advanced VoiceInteractionManager
                voiceManager.stopRecording();
            } else {
                // Stop Web Speech Recognition if active
                if ('speechSynthesis' in window && speechSynthesis.speaking) {
                    speechSynthesis.cancel();
                }
            }
            
            isRecording = false;

            // Update UI
            hideVoiceIndicator();
            document.getElementById('voiceBtn').style.display = 'flex';
            document.getElementById('stopVoiceBtn').style.display = 'none';
        }

        function startVoiceToText() {
            if (currentVoiceMode === 'voice-to-text' || currentVoiceMode === 'voice-to-voice') {
                startVoiceRecording();
            }
        }

        async function processRecording() {
            if (audioChunks.length === 0) return;

            console.log('Processing voice recording...');
            showProcessingIndicator();

            try {
                // Create audio blob
                const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });

                // Convert speech to text
                const transcription = await speechToText(audioBlob);

                if (transcription) {
                    console.log('Transcription:', transcription);

                    // Add user message to chat
                    addMessageToChat('user', transcription);

                    // Get AI response
                    const response = await getAIResponse(transcription);

                    if (response) {
                        // Add bot response to chat
                        addMessageToChat('bot', response);

                        // If voice-to-voice mode, also play the response
                        if (currentVoiceMode === 'voice-to-voice') {
                            await textToSpeech(response);
                        }
                    }
                }
            } catch (error) {
                console.error('Error processing recording:', error);
                showVoiceError('Error processing voice recording. Please try again.');
            } finally {
                hideProcessingIndicator();
            }
        }

        // API functions
        async function speechToText(audioBlob) {
            try {
                // First try Web Speech API (browser-based, more reliable)
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    return await speechToTextWebAPI();
                }
                
                // Fallback to server-based speech-to-text
                const formData = new FormData();
                formData.append('audio', audioBlob, 'recording.webm');

                const response = await fetch('/api/speech-to-text/transcribe', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                return data.transcription;
            } catch (error) {
                console.error('Speech-to-text error:', error);
                showVoiceError('Failed to convert speech to text. Please try again.');
                return null;
            }
        }

        // Web Speech API implementation (browser-based)
        function speechToTextWebAPI() {
            return new Promise((resolve, reject) => {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                
                if (!SpeechRecognition) {
                    reject(new Error('Speech recognition not supported'));
                    return;
                }

                const recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = currentLanguage === 'mr' ? 'mr-IN' : 'en-US';

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    console.log('Speech recognition result:', transcript);
                    resolve(transcript);
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    reject(new Error(`Speech recognition error: ${event.error}`));
                };

                recognition.onend = () => {
                    console.log('Speech recognition ended');
                };

                recognition.start();
            });
        }

        async function getAIResponse(message) {
            try {
                const response = await fetch('/api/conversational-ai/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: message,
                        language: currentLanguage
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                return data.message || data.response;
            } catch (error) {
                console.error('AI response error:', error);
                // Fallback responses
                const fallbackResponses = [
                    "Thank you for sharing that with me. How are you feeling right now?",
                    "I understand. It's completely normal to feel this way sometimes.",
                    "That sounds challenging. What would help you feel better in this moment?",
                    "I'm here to listen. Can you tell me more about what's on your mind?",
                    "It's okay to feel overwhelmed sometimes. Let's take this one step at a time."
                ];
                return fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
            }
        }

        async function textToSpeech(text) {
            try {
                showPlaybackIndicator();

                // Use Web Speech API (browser-based, more reliable)
                if ('speechSynthesis' in window) {
                    await textToSpeechWebAPI(text);
                    return;
                }

                // Fallback to server-based text-to-speech
                const response = await fetch('/api/text-to-speech/synthesize', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: text,
                        language: currentLanguage
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);

                // Play audio
                if (currentAudio) {
                    currentAudio.pause();
                }

                currentAudio = new Audio(audioUrl);
                currentAudio.onended = () => {
                    hidePlaybackIndicator();
                    URL.revokeObjectURL(audioUrl);
                };

                await currentAudio.play();

            } catch (error) {
                console.error('Text-to-speech error:', error);
                hidePlaybackIndicator();
                showVoiceError('Failed to play audio response.');
            }
        }

        // Web Speech API implementation for text-to-speech
        function textToSpeechWebAPI(text) {
            return new Promise((resolve, reject) => {
                if (!('speechSynthesis' in window)) {
                    reject(new Error('Speech synthesis not supported'));
                    return;
                }

                const utterance = new SpeechSynthesisUtterance(text);
                
                // Set language based on current language
                utterance.lang = currentLanguage === 'mr' ? 'mr-IN' : 'en-US';
                utterance.rate = 0.9; // Slightly slower for better comprehension
                utterance.pitch = 1.0;
                utterance.volume = 1.0;

                utterance.onend = () => {
                    console.log('Speech synthesis completed');
                    hidePlaybackIndicator();
                    resolve();
                };

                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event.error);
                    hidePlaybackIndicator();
                    reject(new Error(`Speech synthesis error: ${event.error}`));
                };

                // Start speaking
                speechSynthesis.speak(utterance);
            });
        }

        // UI indicator functions
        function showVoiceIndicator() {
            document.getElementById('voiceIndicator').style.display = 'flex';
        }

        function hideVoiceIndicator() {
            document.getElementById('voiceIndicator').style.display = 'none';
        }

        function showProcessingIndicator() {
            document.getElementById('processingIndicator').style.display = 'block';
        }

        function hideProcessingIndicator() {
            document.getElementById('processingIndicator').style.display = 'none';
        }

        function showPlaybackIndicator() {
            document.getElementById('playbackIndicator').style.display = 'flex';
        }

        function hidePlaybackIndicator() {
            document.getElementById('playbackIndicator').style.display = 'none';
        }

        function showVoiceError(message) {
            const errorDiv = document.getElementById('voiceError');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }
        }

        // Advanced voice interaction area toggle
        async function toggleAdvancedVoiceArea() {
            const voiceArea = document.getElementById('voiceInteractionArea');
            const toggleBtn = document.getElementById('toggleVoiceArea');
            
            if (voiceArea.style.display === 'none') {
                voiceArea.style.display = 'block';
                toggleBtn.querySelector('span').textContent = 'Hide Advanced Voice Mode';
                
                // Initialize the voice manager UI if not already done
                if (voiceManager && !voiceManager.isInitialized) {
                    try {
                        await voiceManager.init('voiceInteractionContainer');
                    } catch (error) {
                        console.error('Failed to initialize voice UI:', error);
                        showVoiceError('Failed to initialize advanced voice features');
                    }
                }
            } else {
                voiceArea.style.display = 'none';
                toggleBtn.querySelector('span').textContent = 'Switch to Advanced Voice Mode';
            }
        }
        
        // Initialize voice mode
        document.addEventListener('DOMContentLoaded', function () {
            // Set initial voice mode
            setVoiceMode('text');

            // Hide all indicators initially
            hideVoiceIndicator();
            hideProcessingIndicator();
            hidePlaybackIndicator();
        });

        // AudioPlaybackManager object for compatibility with HTML onclick handlers
        const AudioPlaybackManager = {
            pause: function () {
                console.log('Audio pause requested');
                if (currentAudio) {
                    currentAudio.pause();
                }
            },

            resume: function () {
                console.log('Audio resume requested');
                if (currentAudio) {
                    currentAudio.play().catch(e => console.log('Resume failed:', e));
                }
            },

            stop: function () {
                console.log('Audio stop requested');
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                }
                hidePlaybackIndicator();
            },

            skipToNext: function () {
                console.log('Audio skip requested');
                this.stop();
            },

            setVolume: function (volume) {
                console.log('Volume set to:', volume);
                if (currentAudio) {
                    currentAudio.volume = volume;
                }
            },

            setPlaybackRate: function (rate) {
                console.log('Playback rate set to:', rate);
                if (currentAudio) {
                    currentAudio.playbackRate = rate;
                }
                // Update speed display
                const speedDisplay = document.getElementById('speedDisplay');
                if (speedDisplay) {
                    speedDisplay.textContent = rate.toFixed(1) + 'x';
                }
            }
        };

        // ChatInterface object for compatibility with HTML onclick handlers
        const ChatInterface = {
            clearHistory: function () {
                console.log('Clearing chat history');
                const chatMessages = document.getElementById('chatMessages');
                if (chatMessages) {
                    // Keep the initial bot message
                    const initialMessage = chatMessages.querySelector('.message.bot');
                    chatMessages.innerHTML = '';
                    if (initialMessage) {
                        chatMessages.appendChild(initialMessage);
                    }
                }
            },

            exportHistory: function () {
                console.log('Exporting chat history');
                const chatMessages = document.getElementById('chatMessages');
                if (chatMessages) {
                    const messages = [];
                    const messageElements = chatMessages.querySelectorAll('.message');

                    messageElements.forEach(msg => {
                        const sender = msg.classList.contains('bot') ? 'AI Assistant' : 'User';
                        const content = msg.querySelector('.message-content').textContent;
                        messages.push(`${sender}: ${content}`);
                    });

                    const chatHistory = messages.join('\n\n');
                    const blob = new Blob([chatHistory], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);

                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `mindcare-chat-${new Date().toISOString().split('T')[0]}.txt`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }
            },

            sendMessage: sendMessage,
            addMessage: addMessageToChat
        };

        console.log('MindCare app with voice features loaded successfully');
    </script>
    <script src="js/voiceInteraction.js"></script>
</body>

</html>
